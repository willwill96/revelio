{"version":3,"file":"main.b0c8b4027e45b3451056.bundle.js","sources":["webpack:///./node_modules/moment/locale sync ^\\.\\/.*$","webpack:///./node_modules/nested-object-assign/lib sync ^\\.\\/.*$","webpack:///./src/main/webapp sync \\.stories\\.(j|t)sx","webpack:///src/main/webapp/about.js","webpack:///src/main/webapp/about.stories.js","webpack:///src/main/webapp/basic-search-helper.js","webpack:///src/main/webapp/basic-search.js","webpack:///src/main/webapp/basic-search.stories.js","webpack:///src/main/webapp/distance-utils.js","webpack:///src/main/webapp/intrigue-api/cql.js","webpack:///src/main/webapp/intrigue-api/lib/cache.js","webpack:///src/main/webapp/intrigue-api/lib/transport.js","webpack:///src/main/webapp/line.js","webpack:///src/main/webapp/location.js","webpack:///src/main/webapp/location.stories.js","webpack:///src/main/webapp/point-radius.js","webpack:///src/main/webapp/polygon.js","webpack:///src/main/webapp/query-status.js","webpack:///src/main/webapp/query-status.stories.js","webpack:///src/main/webapp/react-hooks/index.js","webpack:///src/main/webapp/react-hooks/use-key-pressed.js","webpack:///src/main/webapp/react-hooks/use-undo-state.js","webpack:///src/main/webapp/results/results.js","webpack:///src/main/webapp/results/results.stories.js","webpack:///src/main/webapp/sources.js","webpack:///src/main/webapp/sources.stories.js","webpack:///src/main/webapp/store/results.js","webpack:///src/main/webapp/thumbnail/thumbnail.js","webpack:///src/main/webapp/thumbnail/thumbnail.stories.js","webpack:///src/main/webapp/time-range.js","webpack:///src/main/webapp/time-range.stories.js","webpack:///src/main/webapp/units.js"],"sourcesContent":["var map = {\n\t\"./af\": \"./node_modules/moment/locale/af.js\",\n\t\"./af.js\": \"./node_modules/moment/locale/af.js\",\n\t\"./ar\": \"./node_modules/moment/locale/ar.js\",\n\t\"./ar-dz\": \"./node_modules/moment/locale/ar-dz.js\",\n\t\"./ar-dz.js\": \"./node_modules/moment/locale/ar-dz.js\",\n\t\"./ar-kw\": \"./node_modules/moment/locale/ar-kw.js\",\n\t\"./ar-kw.js\": \"./node_modules/moment/locale/ar-kw.js\",\n\t\"./ar-ly\": \"./node_modules/moment/locale/ar-ly.js\",\n\t\"./ar-ly.js\": \"./node_modules/moment/locale/ar-ly.js\",\n\t\"./ar-ma\": \"./node_modules/moment/locale/ar-ma.js\",\n\t\"./ar-ma.js\": \"./node_modules/moment/locale/ar-ma.js\",\n\t\"./ar-sa\": \"./node_modules/moment/locale/ar-sa.js\",\n\t\"./ar-sa.js\": \"./node_modules/moment/locale/ar-sa.js\",\n\t\"./ar-tn\": \"./node_modules/moment/locale/ar-tn.js\",\n\t\"./ar-tn.js\": \"./node_modules/moment/locale/ar-tn.js\",\n\t\"./ar.js\": \"./node_modules/moment/locale/ar.js\",\n\t\"./az\": \"./node_modules/moment/locale/az.js\",\n\t\"./az.js\": \"./node_modules/moment/locale/az.js\",\n\t\"./be\": \"./node_modules/moment/locale/be.js\",\n\t\"./be.js\": \"./node_modules/moment/locale/be.js\",\n\t\"./bg\": \"./node_modules/moment/locale/bg.js\",\n\t\"./bg.js\": \"./node_modules/moment/locale/bg.js\",\n\t\"./bm\": \"./node_modules/moment/locale/bm.js\",\n\t\"./bm.js\": \"./node_modules/moment/locale/bm.js\",\n\t\"./bn\": \"./node_modules/moment/locale/bn.js\",\n\t\"./bn.js\": \"./node_modules/moment/locale/bn.js\",\n\t\"./bo\": \"./node_modules/moment/locale/bo.js\",\n\t\"./bo.js\": \"./node_modules/moment/locale/bo.js\",\n\t\"./br\": \"./node_modules/moment/locale/br.js\",\n\t\"./br.js\": \"./node_modules/moment/locale/br.js\",\n\t\"./bs\": \"./node_modules/moment/locale/bs.js\",\n\t\"./bs.js\": \"./node_modules/moment/locale/bs.js\",\n\t\"./ca\": \"./node_modules/moment/locale/ca.js\",\n\t\"./ca.js\": \"./node_modules/moment/locale/ca.js\",\n\t\"./cs\": \"./node_modules/moment/locale/cs.js\",\n\t\"./cs.js\": \"./node_modules/moment/locale/cs.js\",\n\t\"./cv\": \"./node_modules/moment/locale/cv.js\",\n\t\"./cv.js\": \"./node_modules/moment/locale/cv.js\",\n\t\"./cy\": \"./node_modules/moment/locale/cy.js\",\n\t\"./cy.js\": \"./node_modules/moment/locale/cy.js\",\n\t\"./da\": \"./node_modules/moment/locale/da.js\",\n\t\"./da.js\": \"./node_modules/moment/locale/da.js\",\n\t\"./de\": \"./node_modules/moment/locale/de.js\",\n\t\"./de-at\": \"./node_modules/moment/locale/de-at.js\",\n\t\"./de-at.js\": \"./node_modules/moment/locale/de-at.js\",\n\t\"./de-ch\": \"./node_modules/moment/locale/de-ch.js\",\n\t\"./de-ch.js\": \"./node_modules/moment/locale/de-ch.js\",\n\t\"./de.js\": \"./node_modules/moment/locale/de.js\",\n\t\"./dv\": \"./node_modules/moment/locale/dv.js\",\n\t\"./dv.js\": \"./node_modules/moment/locale/dv.js\",\n\t\"./el\": \"./node_modules/moment/locale/el.js\",\n\t\"./el.js\": \"./node_modules/moment/locale/el.js\",\n\t\"./en-SG\": \"./node_modules/moment/locale/en-SG.js\",\n\t\"./en-SG.js\": \"./node_modules/moment/locale/en-SG.js\",\n\t\"./en-au\": \"./node_modules/moment/locale/en-au.js\",\n\t\"./en-au.js\": \"./node_modules/moment/locale/en-au.js\",\n\t\"./en-ca\": \"./node_modules/moment/locale/en-ca.js\",\n\t\"./en-ca.js\": \"./node_modules/moment/locale/en-ca.js\",\n\t\"./en-gb\": \"./node_modules/moment/locale/en-gb.js\",\n\t\"./en-gb.js\": \"./node_modules/moment/locale/en-gb.js\",\n\t\"./en-ie\": \"./node_modules/moment/locale/en-ie.js\",\n\t\"./en-ie.js\": \"./node_modules/moment/locale/en-ie.js\",\n\t\"./en-il\": \"./node_modules/moment/locale/en-il.js\",\n\t\"./en-il.js\": \"./node_modules/moment/locale/en-il.js\",\n\t\"./en-nz\": \"./node_modules/moment/locale/en-nz.js\",\n\t\"./en-nz.js\": \"./node_modules/moment/locale/en-nz.js\",\n\t\"./eo\": \"./node_modules/moment/locale/eo.js\",\n\t\"./eo.js\": \"./node_modules/moment/locale/eo.js\",\n\t\"./es\": \"./node_modules/moment/locale/es.js\",\n\t\"./es-do\": \"./node_modules/moment/locale/es-do.js\",\n\t\"./es-do.js\": \"./node_modules/moment/locale/es-do.js\",\n\t\"./es-us\": \"./node_modules/moment/locale/es-us.js\",\n\t\"./es-us.js\": \"./node_modules/moment/locale/es-us.js\",\n\t\"./es.js\": \"./node_modules/moment/locale/es.js\",\n\t\"./et\": \"./node_modules/moment/locale/et.js\",\n\t\"./et.js\": \"./node_modules/moment/locale/et.js\",\n\t\"./eu\": \"./node_modules/moment/locale/eu.js\",\n\t\"./eu.js\": \"./node_modules/moment/locale/eu.js\",\n\t\"./fa\": \"./node_modules/moment/locale/fa.js\",\n\t\"./fa.js\": \"./node_modules/moment/locale/fa.js\",\n\t\"./fi\": \"./node_modules/moment/locale/fi.js\",\n\t\"./fi.js\": \"./node_modules/moment/locale/fi.js\",\n\t\"./fo\": \"./node_modules/moment/locale/fo.js\",\n\t\"./fo.js\": \"./node_modules/moment/locale/fo.js\",\n\t\"./fr\": \"./node_modules/moment/locale/fr.js\",\n\t\"./fr-ca\": \"./node_modules/moment/locale/fr-ca.js\",\n\t\"./fr-ca.js\": \"./node_modules/moment/locale/fr-ca.js\",\n\t\"./fr-ch\": \"./node_modules/moment/locale/fr-ch.js\",\n\t\"./fr-ch.js\": \"./node_modules/moment/locale/fr-ch.js\",\n\t\"./fr.js\": \"./node_modules/moment/locale/fr.js\",\n\t\"./fy\": \"./node_modules/moment/locale/fy.js\",\n\t\"./fy.js\": \"./node_modules/moment/locale/fy.js\",\n\t\"./ga\": \"./node_modules/moment/locale/ga.js\",\n\t\"./ga.js\": \"./node_modules/moment/locale/ga.js\",\n\t\"./gd\": \"./node_modules/moment/locale/gd.js\",\n\t\"./gd.js\": \"./node_modules/moment/locale/gd.js\",\n\t\"./gl\": \"./node_modules/moment/locale/gl.js\",\n\t\"./gl.js\": \"./node_modules/moment/locale/gl.js\",\n\t\"./gom-latn\": \"./node_modules/moment/locale/gom-latn.js\",\n\t\"./gom-latn.js\": \"./node_modules/moment/locale/gom-latn.js\",\n\t\"./gu\": \"./node_modules/moment/locale/gu.js\",\n\t\"./gu.js\": \"./node_modules/moment/locale/gu.js\",\n\t\"./he\": \"./node_modules/moment/locale/he.js\",\n\t\"./he.js\": \"./node_modules/moment/locale/he.js\",\n\t\"./hi\": \"./node_modules/moment/locale/hi.js\",\n\t\"./hi.js\": \"./node_modules/moment/locale/hi.js\",\n\t\"./hr\": \"./node_modules/moment/locale/hr.js\",\n\t\"./hr.js\": \"./node_modules/moment/locale/hr.js\",\n\t\"./hu\": \"./node_modules/moment/locale/hu.js\",\n\t\"./hu.js\": \"./node_modules/moment/locale/hu.js\",\n\t\"./hy-am\": \"./node_modules/moment/locale/hy-am.js\",\n\t\"./hy-am.js\": \"./node_modules/moment/locale/hy-am.js\",\n\t\"./id\": \"./node_modules/moment/locale/id.js\",\n\t\"./id.js\": \"./node_modules/moment/locale/id.js\",\n\t\"./is\": \"./node_modules/moment/locale/is.js\",\n\t\"./is.js\": \"./node_modules/moment/locale/is.js\",\n\t\"./it\": \"./node_modules/moment/locale/it.js\",\n\t\"./it-ch\": \"./node_modules/moment/locale/it-ch.js\",\n\t\"./it-ch.js\": \"./node_modules/moment/locale/it-ch.js\",\n\t\"./it.js\": \"./node_modules/moment/locale/it.js\",\n\t\"./ja\": \"./node_modules/moment/locale/ja.js\",\n\t\"./ja.js\": \"./node_modules/moment/locale/ja.js\",\n\t\"./jv\": \"./node_modules/moment/locale/jv.js\",\n\t\"./jv.js\": \"./node_modules/moment/locale/jv.js\",\n\t\"./ka\": \"./node_modules/moment/locale/ka.js\",\n\t\"./ka.js\": \"./node_modules/moment/locale/ka.js\",\n\t\"./kk\": \"./node_modules/moment/locale/kk.js\",\n\t\"./kk.js\": \"./node_modules/moment/locale/kk.js\",\n\t\"./km\": \"./node_modules/moment/locale/km.js\",\n\t\"./km.js\": \"./node_modules/moment/locale/km.js\",\n\t\"./kn\": \"./node_modules/moment/locale/kn.js\",\n\t\"./kn.js\": \"./node_modules/moment/locale/kn.js\",\n\t\"./ko\": \"./node_modules/moment/locale/ko.js\",\n\t\"./ko.js\": \"./node_modules/moment/locale/ko.js\",\n\t\"./ku\": \"./node_modules/moment/locale/ku.js\",\n\t\"./ku.js\": \"./node_modules/moment/locale/ku.js\",\n\t\"./ky\": \"./node_modules/moment/locale/ky.js\",\n\t\"./ky.js\": \"./node_modules/moment/locale/ky.js\",\n\t\"./lb\": \"./node_modules/moment/locale/lb.js\",\n\t\"./lb.js\": \"./node_modules/moment/locale/lb.js\",\n\t\"./lo\": \"./node_modules/moment/locale/lo.js\",\n\t\"./lo.js\": \"./node_modules/moment/locale/lo.js\",\n\t\"./lt\": \"./node_modules/moment/locale/lt.js\",\n\t\"./lt.js\": \"./node_modules/moment/locale/lt.js\",\n\t\"./lv\": \"./node_modules/moment/locale/lv.js\",\n\t\"./lv.js\": \"./node_modules/moment/locale/lv.js\",\n\t\"./me\": \"./node_modules/moment/locale/me.js\",\n\t\"./me.js\": \"./node_modules/moment/locale/me.js\",\n\t\"./mi\": \"./node_modules/moment/locale/mi.js\",\n\t\"./mi.js\": \"./node_modules/moment/locale/mi.js\",\n\t\"./mk\": \"./node_modules/moment/locale/mk.js\",\n\t\"./mk.js\": \"./node_modules/moment/locale/mk.js\",\n\t\"./ml\": \"./node_modules/moment/locale/ml.js\",\n\t\"./ml.js\": \"./node_modules/moment/locale/ml.js\",\n\t\"./mn\": \"./node_modules/moment/locale/mn.js\",\n\t\"./mn.js\": \"./node_modules/moment/locale/mn.js\",\n\t\"./mr\": \"./node_modules/moment/locale/mr.js\",\n\t\"./mr.js\": \"./node_modules/moment/locale/mr.js\",\n\t\"./ms\": \"./node_modules/moment/locale/ms.js\",\n\t\"./ms-my\": \"./node_modules/moment/locale/ms-my.js\",\n\t\"./ms-my.js\": \"./node_modules/moment/locale/ms-my.js\",\n\t\"./ms.js\": \"./node_modules/moment/locale/ms.js\",\n\t\"./mt\": \"./node_modules/moment/locale/mt.js\",\n\t\"./mt.js\": \"./node_modules/moment/locale/mt.js\",\n\t\"./my\": \"./node_modules/moment/locale/my.js\",\n\t\"./my.js\": \"./node_modules/moment/locale/my.js\",\n\t\"./nb\": \"./node_modules/moment/locale/nb.js\",\n\t\"./nb.js\": \"./node_modules/moment/locale/nb.js\",\n\t\"./ne\": \"./node_modules/moment/locale/ne.js\",\n\t\"./ne.js\": \"./node_modules/moment/locale/ne.js\",\n\t\"./nl\": \"./node_modules/moment/locale/nl.js\",\n\t\"./nl-be\": \"./node_modules/moment/locale/nl-be.js\",\n\t\"./nl-be.js\": \"./node_modules/moment/locale/nl-be.js\",\n\t\"./nl.js\": \"./node_modules/moment/locale/nl.js\",\n\t\"./nn\": \"./node_modules/moment/locale/nn.js\",\n\t\"./nn.js\": \"./node_modules/moment/locale/nn.js\",\n\t\"./pa-in\": \"./node_modules/moment/locale/pa-in.js\",\n\t\"./pa-in.js\": \"./node_modules/moment/locale/pa-in.js\",\n\t\"./pl\": \"./node_modules/moment/locale/pl.js\",\n\t\"./pl.js\": \"./node_modules/moment/locale/pl.js\",\n\t\"./pt\": \"./node_modules/moment/locale/pt.js\",\n\t\"./pt-br\": \"./node_modules/moment/locale/pt-br.js\",\n\t\"./pt-br.js\": \"./node_modules/moment/locale/pt-br.js\",\n\t\"./pt.js\": \"./node_modules/moment/locale/pt.js\",\n\t\"./ro\": \"./node_modules/moment/locale/ro.js\",\n\t\"./ro.js\": \"./node_modules/moment/locale/ro.js\",\n\t\"./ru\": \"./node_modules/moment/locale/ru.js\",\n\t\"./ru.js\": \"./node_modules/moment/locale/ru.js\",\n\t\"./sd\": \"./node_modules/moment/locale/sd.js\",\n\t\"./sd.js\": \"./node_modules/moment/locale/sd.js\",\n\t\"./se\": \"./node_modules/moment/locale/se.js\",\n\t\"./se.js\": \"./node_modules/moment/locale/se.js\",\n\t\"./si\": \"./node_modules/moment/locale/si.js\",\n\t\"./si.js\": \"./node_modules/moment/locale/si.js\",\n\t\"./sk\": \"./node_modules/moment/locale/sk.js\",\n\t\"./sk.js\": \"./node_modules/moment/locale/sk.js\",\n\t\"./sl\": \"./node_modules/moment/locale/sl.js\",\n\t\"./sl.js\": \"./node_modules/moment/locale/sl.js\",\n\t\"./sq\": \"./node_modules/moment/locale/sq.js\",\n\t\"./sq.js\": \"./node_modules/moment/locale/sq.js\",\n\t\"./sr\": \"./node_modules/moment/locale/sr.js\",\n\t\"./sr-cyrl\": \"./node_modules/moment/locale/sr-cyrl.js\",\n\t\"./sr-cyrl.js\": \"./node_modules/moment/locale/sr-cyrl.js\",\n\t\"./sr.js\": \"./node_modules/moment/locale/sr.js\",\n\t\"./ss\": \"./node_modules/moment/locale/ss.js\",\n\t\"./ss.js\": \"./node_modules/moment/locale/ss.js\",\n\t\"./sv\": \"./node_modules/moment/locale/sv.js\",\n\t\"./sv.js\": \"./node_modules/moment/locale/sv.js\",\n\t\"./sw\": \"./node_modules/moment/locale/sw.js\",\n\t\"./sw.js\": \"./node_modules/moment/locale/sw.js\",\n\t\"./ta\": \"./node_modules/moment/locale/ta.js\",\n\t\"./ta.js\": \"./node_modules/moment/locale/ta.js\",\n\t\"./te\": \"./node_modules/moment/locale/te.js\",\n\t\"./te.js\": \"./node_modules/moment/locale/te.js\",\n\t\"./tet\": \"./node_modules/moment/locale/tet.js\",\n\t\"./tet.js\": \"./node_modules/moment/locale/tet.js\",\n\t\"./tg\": \"./node_modules/moment/locale/tg.js\",\n\t\"./tg.js\": \"./node_modules/moment/locale/tg.js\",\n\t\"./th\": \"./node_modules/moment/locale/th.js\",\n\t\"./th.js\": \"./node_modules/moment/locale/th.js\",\n\t\"./tl-ph\": \"./node_modules/moment/locale/tl-ph.js\",\n\t\"./tl-ph.js\": \"./node_modules/moment/locale/tl-ph.js\",\n\t\"./tlh\": \"./node_modules/moment/locale/tlh.js\",\n\t\"./tlh.js\": \"./node_modules/moment/locale/tlh.js\",\n\t\"./tr\": \"./node_modules/moment/locale/tr.js\",\n\t\"./tr.js\": \"./node_modules/moment/locale/tr.js\",\n\t\"./tzl\": \"./node_modules/moment/locale/tzl.js\",\n\t\"./tzl.js\": \"./node_modules/moment/locale/tzl.js\",\n\t\"./tzm\": \"./node_modules/moment/locale/tzm.js\",\n\t\"./tzm-latn\": \"./node_modules/moment/locale/tzm-latn.js\",\n\t\"./tzm-latn.js\": \"./node_modules/moment/locale/tzm-latn.js\",\n\t\"./tzm.js\": \"./node_modules/moment/locale/tzm.js\",\n\t\"./ug-cn\": \"./node_modules/moment/locale/ug-cn.js\",\n\t\"./ug-cn.js\": \"./node_modules/moment/locale/ug-cn.js\",\n\t\"./uk\": \"./node_modules/moment/locale/uk.js\",\n\t\"./uk.js\": \"./node_modules/moment/locale/uk.js\",\n\t\"./ur\": \"./node_modules/moment/locale/ur.js\",\n\t\"./ur.js\": \"./node_modules/moment/locale/ur.js\",\n\t\"./uz\": \"./node_modules/moment/locale/uz.js\",\n\t\"./uz-latn\": \"./node_modules/moment/locale/uz-latn.js\",\n\t\"./uz-latn.js\": \"./node_modules/moment/locale/uz-latn.js\",\n\t\"./uz.js\": \"./node_modules/moment/locale/uz.js\",\n\t\"./vi\": \"./node_modules/moment/locale/vi.js\",\n\t\"./vi.js\": \"./node_modules/moment/locale/vi.js\",\n\t\"./x-pseudo\": \"./node_modules/moment/locale/x-pseudo.js\",\n\t\"./x-pseudo.js\": \"./node_modules/moment/locale/x-pseudo.js\",\n\t\"./yo\": \"./node_modules/moment/locale/yo.js\",\n\t\"./yo.js\": \"./node_modules/moment/locale/yo.js\",\n\t\"./zh-cn\": \"./node_modules/moment/locale/zh-cn.js\",\n\t\"./zh-cn.js\": \"./node_modules/moment/locale/zh-cn.js\",\n\t\"./zh-hk\": \"./node_modules/moment/locale/zh-hk.js\",\n\t\"./zh-hk.js\": \"./node_modules/moment/locale/zh-hk.js\",\n\t\"./zh-tw\": \"./node_modules/moment/locale/zh-tw.js\",\n\t\"./zh-tw.js\": \"./node_modules/moment/locale/zh-tw.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./node_modules/moment/locale sync recursive ^\\\\.\\\\/.*$\";","var map = {\n\t\"./nestedObjectAssign\": \"./node_modules/nested-object-assign/lib/nestedObjectAssign.js\",\n\t\"./nestedObjectAssign.js\": \"./node_modules/nested-object-assign/lib/nestedObjectAssign.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./node_modules/nested-object-assign/lib sync recursive ^\\\\.\\\\/.*$\";","var map = {\n\t\"./about.stories.js\": \"./src/main/webapp/about.stories.js\",\n\t\"./basic-search.stories.js\": \"./src/main/webapp/basic-search.stories.js\",\n\t\"./location.stories.js\": \"./src/main/webapp/location.stories.js\",\n\t\"./query-status.stories.js\": \"./src/main/webapp/query-status.stories.js\",\n\t\"./results/results.stories.js\": \"./src/main/webapp/results/results.stories.js\",\n\t\"./sources.stories.js\": \"./src/main/webapp/sources.stories.js\",\n\t\"./thumbnail/thumbnail.stories.js\": \"./src/main/webapp/thumbnail/thumbnail.stories.js\",\n\t\"./time-range.stories.js\": \"./src/main/webapp/time-range.stories.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./src/main/webapp sync recursive \\\\.stories\\\\.(j|t)sx?$\";","import React from 'react'\n\nimport { useQuery } from '@apollo/react-hooks'\nimport gql from 'graphql-tag'\n\nimport Typography from '@material-ui/core/Typography'\nimport Divider from '@material-ui/core/Divider'\n\nimport Button from '@material-ui/core/Button'\nimport Card from '@material-ui/core/Card'\nimport CardContent from '@material-ui/core/CardContent'\nimport CardActions from '@material-ui/core/CardActions'\nimport LinearProgress from '@material-ui/core/LinearProgress'\n\nconst Info = ({ title, value }) => {\n  return (\n    <React.Fragment>\n      <Typography variant=\"h6\" component=\"h2\">\n        {title}\n      </Typography>\n      <Typography color=\"textSecondary\" gutterBottom>\n        {value}\n      </Typography>\n    </React.Fragment>\n  )\n}\n\nconst Content = props => {\n  const { version, identifier, releaseDate, branding, product } = props\n  return (\n    <CardContent>\n      <Typography variant=\"h4\" component=\"h1\">\n        {branding} {product}\n      </Typography>\n      <Divider style={{ marginBottom: 15, marginTop: 10 }} />\n\n      <Info title=\"Version\" value={version} />\n      <Info title=\"Unique Identifier\" value={identifier} />\n      <Info title=\"Release Date\" value={releaseDate} />\n    </CardContent>\n  )\n}\n\nconst Failure = ({ error, onFetchProperties }) => {\n  return (\n    <React.Fragment>\n      <CardContent>\n        <Info title=\"Error\" value={error} />\n      </CardContent>\n      <CardActions>\n        <Button variant=\"contained\" color=\"primary\" onClick={onFetchProperties}>\n          Refresh\n        </Button>\n      </CardActions>\n    </React.Fragment>\n  )\n}\n\nconst Loading = () => {\n  return (\n    <CardContent>\n      <LinearProgress />\n    </CardContent>\n  )\n}\n\nconst Component = props => {\n  const { error, attributes } = props\n  if (typeof error === 'string') {\n    return <Failure {...props} />\n  }\n  if (attributes !== null && typeof attributes === 'object') {\n    return <Content {...attributes} />\n  }\n  return <Loading />\n}\n\nexport const About = props => {\n  return (\n    <div style={{ maxWidth: 600, margin: '20px auto' }}>\n      <Card>\n        <Component {...props} />\n      </Card>\n    </div>\n  )\n}\n\nconst query = gql`\n  query AboutPage {\n    systemProperties {\n      product\n      branding\n      identifier\n      version\n      releaseDate\n    }\n  }\n`\n\nexport default () => {\n  const { loading, error, data = {} } = useQuery(query)\n  const attributes = data.systemProperties\n  const props = { error, attributes }\n\n  return <About {...props} />\n}\n","import React from 'react'\nimport { storiesOf } from '@connexta/ace/@storybook/react'\nimport { About } from './about'\nimport { withKnobs, text, select } from '@connexta/ace/@storybook/addon-knobs'\nimport { action } from '@connexta/ace/@storybook/addon-actions'\n\nconst stories = storiesOf('About', module)\nstories.addDecorator(withKnobs)\n\nstories.add('success', () => {\n  const attributes = {\n    branding: text('Branding', 'DDF'),\n    product: text('Product', 'Intrigue'),\n    version: text('Version', '2.18.0-SNAPSHOT'),\n    identifier: text('Identifier', 'feu7s2abm with Changes'),\n    releaseDate: text('Release Date', 'August 20th 2019'),\n  }\n\n  return <About attributes={attributes} />\n})\n\nstories.add('loading', () => {\n  return <About />\n})\n\nstories.add('failure', () => {\n  const error = text('Error', 'API Failure')\n  return <About error={error} onFetchProperties={action('onFetchProperties')} />\n})\n","const { Map, fromJS } = require('immutable')\nimport { locationTypes } from './location'\nexport const APPLY_TO_KEY = 'applyTo'\nexport const DATATYPES_KEY = 'datatypes'\nexport const LOCATION_KEY = 'location'\nexport const TEXT_KEY = 'text'\nexport const TIME_RANGE_KEY = 'timeRange'\n\nconst timeProperties = [\n  'created',\n  'datetime.end',\n  'datetime.start',\n  'effective',\n  'expiration',\n  'metacard.created',\n  'metacard.modified',\n  'metacard.version.versioned-on',\n  'modified',\n]\n\nconst uglyMap = {\n  minutes: howMany => `RELATIVE(PT${howMany}M)`,\n  hours: howMany => `RELATIVE(PT${howMany}H)`,\n  days: howMany => `RELATIVE(P${howMany}D)`,\n  months: howMany => `RELATIVE(P${howMany}M)`,\n  years: howMany => `RELATIVE(P${howMany}Y)`,\n}\n\nconst relativeUnits = {\n  P: {\n    D: 'days',\n    M: 'months',\n    Y: 'years',\n  },\n  PT: {\n    H: 'hours',\n    M: 'minutes',\n  },\n}\n\n// Create the Map\nconst unitsMap = Map(fromJS(relativeUnits))\n\nconst datatypeProperties = ['metadata-content-type', 'datatype']\n\nconst parseGeoFilter = (filter = {}) => {\n  const geojson = Map(filter.geojson)\n  if (filter.value.includes('POINT')) {\n    return {\n      type: 'pointRadius',\n      location: Map({\n        lon: geojson.getIn(['geometry', 'coordinates'])[0],\n        lat: geojson.getIn(['geometry', 'coordinates'])[1],\n        bufferWidth: geojson.getIn(['properties', 'buffer', 'width']),\n        unit: geojson.getIn(['properties', 'buffer', 'unit']),\n      }),\n    }\n  }\n\n  if (filter.value.includes('POLYGON')) {\n    return {\n      type: 'polygon',\n      location: Map({\n        coordinates: geojson.getIn(['geometry', 'coordinates']),\n        bufferWidth: geojson.getIn(['properties', 'buffer', 'width']),\n        unit: geojson.getIn(['properties', 'buffer', 'unit']),\n      }),\n    }\n  }\n}\n\nexport const fromFilterTree = filterTree => {\n  return filterTree.filters.reduce((accumulator, filter) => {\n    const { property, value, filters } = filter\n\n    if (property === 'anyText') {\n      return accumulator.set(TEXT_KEY, value)\n    }\n\n    if (property === 'anyGeo') {\n      return accumulator.set(LOCATION_KEY, Map(parseGeoFilter(filter)))\n    }\n\n    if (filters && filters[0]) {\n      if (timeProperties.includes(filters[0].property)) {\n        if (filters[0].type === '=') {\n          const { last, unit } = parseRelative(filters[0].value)\n          filters[0].last = last\n          filters[0].unit = unit\n        }\n\n        return accumulator.set(\n          TIME_RANGE_KEY,\n          Map({\n            value: filters[0],\n            applyTo: filters.map(({ property }) => property),\n          })\n        )\n      }\n\n      if (datatypeProperties.includes(filters[0].property)) {\n        const applyTo = Array.from(new Set(filters.map(({ value }) => value)))\n        return accumulator.set(DATATYPES_KEY, applyTo)\n      }\n    }\n\n    return accumulator\n  }, Map())\n}\n\nconst parseRelative = relative => {\n  const matches = relative.match(/RELATIVE\\((\\D*)(\\d*)(\\D*)\\)/)\n  if (matches && matches.length > 3) {\n    const [full, timeOrDay, last, unitKey] = matches\n    const unit = unitsMap.getIn([timeOrDay, unitKey])\n\n    return { last, unit }\n  }\n\n  return {}\n}\n\nconst getLocationFilter = (data = Map()) => {\n  const { type, location } = data.toJSON()\n  if (!type || !location) {\n    return null\n  }\n  return locationTypes[type].generateFilter(location)\n}\n\nexport const toFilterTree = basicData => {\n  const getTimeRangeFilter = () => {\n    const applyTo = basicData.getIn([TIME_RANGE_KEY, APPLY_TO_KEY])\n    const rest = basicData.getIn([TIME_RANGE_KEY, 'value'])\n\n    if (!applyTo || !rest) {\n      return null\n    }\n\n    if (rest.type === '=') {\n      const { last, unit } = rest\n      rest.value = uglyMap[unit](last)\n    }\n\n    return {\n      type: 'OR',\n      filters: applyTo.map(property => ({\n        ...rest,\n        property,\n      })),\n    }\n  }\n\n  const getDatatypesFilter = () => {\n    const applyTo = basicData.get(DATATYPES_KEY)\n    debugger\n    if (!applyTo || applyTo.length === 0) {\n      return null\n    }\n    const datatypeFilters = applyTo.map(value => ({\n      type: 'ILIKE',\n      property: 'datatype',\n      value,\n    }))\n    const contentTypeFilters = applyTo.map(value => ({\n      type: 'ILIKE',\n      property: 'metadata-content-type',\n      value,\n    }))\n    return {\n      type: 'OR',\n      filters: [...datatypeFilters, ...contentTypeFilters],\n    }\n  }\n\n  const text = basicData.has(TEXT_KEY)\n    ? {\n        type: 'ILIKE',\n        property: 'anyText',\n        value: basicData.get(TEXT_KEY),\n      }\n    : null\n\n  const location = getLocationFilter(basicData.get(LOCATION_KEY))\n  const timeRange = getTimeRangeFilter()\n  const datatypes = getDatatypesFilter()\n\n  const filters = [text, location, timeRange, datatypes].filter(\n    filter => filter !== null\n  )\n\n  return {\n    type: 'AND',\n    filters,\n  }\n}\n","import Button from '@material-ui/core/Button'\nimport Checkbox from '@material-ui/core/Checkbox'\nimport Divider from '@material-ui/core/Divider'\nimport Fab from '@material-ui/core/Fab'\nimport FormControl from '@material-ui/core/FormControl'\nimport FormHelperText from '@material-ui/core/FormHelperText'\nimport Input from '@material-ui/core/Input'\nimport InputLabel from '@material-ui/core/InputLabel'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport Menu from '@material-ui/core/Menu'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport Paper from '@material-ui/core/Paper'\nimport Select from '@material-ui/core/Select'\nimport TextField from '@material-ui/core/TextField'\nimport RemoveIcon from '@material-ui/icons/Remove'\nimport { Map } from 'immutable'\nimport React from 'react'\nimport { connect } from 'react-redux'\nimport {\n  APPLY_TO_KEY,\n  DATATYPES_KEY,\n  LOCATION_KEY,\n  TEXT_KEY,\n  TIME_RANGE_KEY,\n  toFilterTree,\n} from './basic-search-helper'\nimport { executeQuery } from './intrigue-api/lib/cache'\nimport Location, { validate as validateLocation } from './location'\nimport TimeRange, {\n  createTimeRange,\n  validate as validateTimeRange,\n} from './time-range'\n\nconst timeAttributes = [\n  'created',\n  'datetime.end',\n  'datetime.start',\n  'effective',\n  'expiration',\n  'metacard.created',\n  'metacard.modified',\n  'metacard.version.versioned-on',\n  'modified',\n]\n\nconst datatypes = [\n  'Interactive Resource',\n  'Moving Image',\n  'Still Image',\n  'Dataset',\n  'Collection',\n  'Event',\n  'Service',\n  'Software',\n  'Sound',\n  'Text',\n  'Image',\n  'Physical Object',\n]\n\nconst TextSearch = ({ text, handleChange }) => {\n  return (\n    <TextField\n      fullWidth\n      label=\"Text\"\n      variant=\"outlined\"\n      value={text}\n      onChange={handleChange}\n    />\n  )\n}\n\nconst filterMap = {\n  location: 'Location',\n  timeRange: 'Time Range',\n  datatypes: 'Match Types',\n  sources: 'Sources',\n}\n\nconst AddButton = ({ addFilter }) => {\n  const [anchorEl, setAnchorEl] = React.useState(null)\n  function handleClick(event) {\n    setAnchorEl(event.currentTarget)\n  }\n\n  function handleClose() {\n    setAnchorEl(null)\n  }\n\n  return (\n    <React.Fragment>\n      <Button onClick={handleClick} style={{ marginLeft: '20px' }}>\n        Add Filters\n      </Button>\n\n      <Menu\n        anchorEl={anchorEl}\n        keepMounted\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n      >\n        {Object.keys(filterMap).map(filter => (\n          <MenuItem\n            key={filter}\n            value={filter}\n            onClick={() => {\n              addFilter(filter)\n              handleClose()\n            }}\n          >\n            {filterMap[filter]}\n          </MenuItem>\n        ))}\n      </Menu>\n    </React.Fragment>\n  )\n}\n\nconst SearchButton = props => (\n  <Button\n    style={props.style}\n    fullWidth\n    variant=\"contained\"\n    color=\"primary\"\n    onClick={props.onSearch}\n  >\n    Search\n  </Button>\n)\n\nconst populateDefaultQuery = (filterTree, srcs = ['ddf.distribution']) => ({\n  srcs,\n  start: 1,\n  count: 250,\n  filterTree,\n  sorts: [\n    {\n      attribute: 'modified',\n      direction: 'descending',\n    },\n  ],\n  id: '313a84858daa4ef5980d4b11a745d6d3',\n  spellcheck: false,\n  phonetics: false,\n  batchId: '5a3f400c2e1e410e8d37494500173ca4',\n})\n\nconst MatchTypes = ({ state = [], setState, errors = {} }) => {\n  errors = errors.matchTypesErrors || {}\n  return (\n    <FormControl fullWidth>\n      <InputLabel>Match Types</InputLabel>\n      <Select\n        error={errors.datatypes !== undefined}\n        multiple\n        value={state}\n        onChange={e => setState(e.target.value)}\n        renderValue={selected => selected.join(', ')}\n      >\n        {datatypes.map(datatype => (\n          <MenuItem key={datatype} value={datatype}>\n            <Checkbox checked={state.indexOf(datatype) > -1} />\n            <ListItemText primary={datatype} />\n          </MenuItem>\n        ))}\n      </Select>\n      <FormHelperText error={errors.datatypes !== undefined}>\n        {errors.datatypes}\n      </FormHelperText>\n    </FormControl>\n  )\n}\n\nconst MatchSources = ({ state = ['ddf.distribution'], setState }) => {\n  const sources = ['ddf.distribution', 'csw', 'opensearch']\n\n  return (\n    <FormControl fullWidth>\n      <InputLabel>Sources</InputLabel>\n      <Select\n        multiple\n        value={state}\n        onChange={e => setState(e.target.value)}\n        renderValue={selected => {\n          return selected.join(', ')\n        }}\n      >\n        {sources.map(source => (\n          <MenuItem key={source} value={source}>\n            <Checkbox checked={state.indexOf(source) > -1} />\n            <ListItemText primary={source} />\n          </MenuItem>\n        ))}\n      </Select>\n    </FormControl>\n  )\n}\n\nconst BasicTimeRange = ({ state = Map(), setState, errors }) => {\n  return (\n    <div style={{ flex: '1', overflow: 'hidden' }}>\n      <TimeRange\n        errors={errors.timeRangeErrors}\n        fullWidth\n        timeRange={state.get('value')}\n        setTimeRange={updatedTimeRange => {\n          const next = state.set('value', updatedTimeRange)\n          setState(next)\n        }}\n      />\n      <FormControl fullWidth>\n        <AttributeSelector\n          attributes={state.get(APPLY_TO_KEY)}\n          errors={errors.attributeSelectorErrors}\n          setAttributes={attributes => {\n            const next = state.set(APPLY_TO_KEY, attributes)\n            setState(next)\n          }}\n        />\n      </FormControl>\n    </div>\n  )\n}\n\nconst AttributeSelector = props => {\n  const { attributes = [], setAttributes, errors = {} } = props\n\n  return (\n    <FormControl fullWidth>\n      <InputLabel>Apply Time Range To</InputLabel>\n      <Select\n        error={errors.applyTo !== undefined}\n        multiple\n        value={attributes}\n        onChange={e => setAttributes(e.target.value)}\n        input={<Input />}\n        renderValue={selected => {\n          return selected.join(', ')\n        }}\n      >\n        {timeAttributes.map(name => (\n          <MenuItem key={name} value={name}>\n            <Checkbox checked={attributes.indexOf(name) > -1} />\n            <ListItemText primary={name} />\n          </MenuItem>\n        ))}\n      </Select>\n      <FormHelperText error={errors.applyTo !== undefined}>\n        {errors.applyTo}\n      </FormHelperText>\n    </FormControl>\n  )\n}\n\nconst BasicLocation = ({ state = Map(), setState, errors }) => {\n  return (\n    <Location\n      value={state}\n      onChange={setState}\n      errors={errors.locationErrors}\n    />\n  )\n}\n\nconst filters = {\n  [LOCATION_KEY]: BasicLocation,\n  timeRange: BasicTimeRange,\n  datatypes: MatchTypes,\n  sources: MatchSources,\n}\n\nconst defaultFilters = {\n  timeRange: Map({\n    value: createTimeRange({ type: 'BEFORE' }),\n    applyTo: ['created'],\n  }),\n  [LOCATION_KEY]: Map({\n    type: 'line',\n  }),\n}\n\nexport const BasicSearch = props => {\n  const [filterTree, setFilterTree] = React.useState(\n    Map({ text: '*' })\n    // fromFilterTree(exampleFilterTree)\n  )\n\n  const [submitted, setSubmitted] = React.useState(false)\n  const errors = validate(filterTree)\n\n  const text = filterTree.get('text')\n\n  const spacing = 20\n  return (\n    <Paper\n      style={{\n        overflow: 'auto',\n        maxWidth: 600,\n        maxHeight: '100%',\n      }}\n    >\n      <div\n        style={{\n          display: 'flex',\n          alignItems: 'center',\n          padding: spacing,\n          boxSizing: 'border-box',\n        }}\n      >\n        <TextSearch\n          text={text}\n          handleChange={e =>\n            setFilterTree(filterTree.set(TEXT_KEY, e.target.value))\n          }\n        />\n        <AddButton\n          addFilter={filter => {\n            setFilterTree(\n              filterTree.merge({\n                [filter]: defaultFilters[filter],\n              })\n            )\n          }}\n        />\n      </div>\n\n      {filterTree\n        .remove('text')\n        .map((state, filter) => {\n          const Component = filters[filter]\n\n          return (\n            <div key={filter} style={{ width: '100%' }}>\n              <Divider style={{ marginBottom: 15, marginTop: 10 }} />\n              <div\n                style={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  padding: spacing,\n                  boxSizing: 'border-box',\n                }}\n              >\n                <div style={{ marginRight: spacing }}>\n                  <Fab\n                    size=\"small\"\n                    color=\"secondary\"\n                    onClick={() => {\n                      setFilterTree(filterTree.remove(filter))\n                    }}\n                  >\n                    <RemoveIcon />\n                  </Fab>\n                </div>\n                <Component\n                  state={state}\n                  setState={state => {\n                    setFilterTree(filterTree.set(filter, state))\n                  }}\n                  errors={submitted ? errors : {}}\n                />\n              </div>\n            </div>\n          )\n        })\n        .valueSeq()}\n\n      <SearchButton\n        fullWidth\n        style={{ marginTop: spacing }}\n        onSearch={() => {\n          setSubmitted(true)\n\n          if (isEmpty(errors)) {\n            props.onSearch(\n              populateDefaultQuery(\n                toFilterTree(filterTree),\n                filterTree.get('sources')\n              )\n            )\n          }\n        }}\n      />\n    </Paper>\n  )\n}\n\nconst isEmpty = checkThis => {\n  return Object.keys(checkThis).length === 0\n}\n\nconst validateAttributeSelector = (applyTo = []) => {\n  const errors = {}\n\n  if (applyTo.length === 0) {\n    errors.applyTo = 'Must choose at least one attribute'\n  }\n\n  return errors\n}\n\nconst validateMatchTypes = (datatypes = []) => {\n  return {}\n}\n\nconst combineValidators = () => {}\n\nconst validate = (filterMap = Map()) => {\n  let errors = {}\n\n  if (filterMap.has(LOCATION_KEY)) {\n    const locationErrors = validateLocation(filterMap.getIn([LOCATION_KEY]))\n    if (!isEmpty(locationErrors)) {\n      errors['locationErrors'] = locationErrors\n    }\n  }\n\n  if (filterMap.has(TIME_RANGE_KEY)) {\n    const timeRangeErrors = validateTimeRange(\n      filterMap.getIn([TIME_RANGE_KEY, 'value'])\n    )\n\n    if (!isEmpty(timeRangeErrors)) {\n      errors['timeRangeErrors'] = timeRangeErrors\n    }\n\n    const attributeSelectorErrors = validateAttributeSelector(\n      filterMap.getIn([TIME_RANGE_KEY, APPLY_TO_KEY])\n    )\n    if (!isEmpty(attributeSelectorErrors)) {\n      errors['attributeSelectorErrors'] = attributeSelectorErrors\n    }\n  }\n\n  if (filterMap.has(DATATYPES_KEY)) {\n    const matchTypesErrors = validateMatchTypes(\n      filterMap.getIn([DATATYPES_KEY])\n    )\n    if (!isEmpty(matchTypesErrors)) {\n      errors['matchTypesErrors'] = matchTypesErrors\n    }\n  }\n  return errors\n}\n\nconst mapDispatchToProps = { onSearch: executeQuery }\n\nexport default connect(\n  null,\n  mapDispatchToProps\n)(BasicSearch)\n","import React from 'react'\nimport { storiesOf } from '@connexta/ace/@storybook/react'\nimport { text, select } from '@connexta/ace/@storybook/addon-knobs'\nimport { action } from '@connexta/ace/@storybook/addon-actions'\nimport { BasicSearch } from './basic-search'\n\nconst stories = storiesOf('BasicSearch', module)\n\nstories.add('basic', () => {\n  return <BasicSearch onSearch={action('onSearch')} />\n})\n","const EARTH_MEAN_RADIUS_METERS = 6371008.7714\n\nconst DEGREES_TO_RADIANS = Math.PI / 180\nconst RADIANS_TO_DEGREES = 1 / DEGREES_TO_RADIANS\n\nconst METERS_KILOMETERS = 1000\nconst METERS_FEET = 0.3048\nconst METERS_YARDS = 0.9144\nconst METERS_MILES = 1609.344\nconst METERS_NAUTICAL_MILES = 1852\n\n/* 6 Digits of precision used because it gives precision up to \n0.11 meters, which was deemed precise enough for any use case \nof application */\nconst DECIMAL_PRECISION = 6\n\nconst getDistanceInMeters = ({ distance, units }) => {\n  distance = distance || 0\n  switch (units) {\n    case 'kilometers':\n      return distance * METERS_KILOMETERS\n    case 'feet':\n      return distance * METERS_FEET\n    case 'yards':\n      return distance * METERS_YARDS\n    case 'miles':\n      return distance * METERS_MILES\n    case 'nautical miles':\n      return distance * METERS_NAUTICAL_MILES\n    case 'meters':\n    default:\n      return distance\n  }\n}\n\nconst getDistanceFromMeters = ({ distance, units }) => {\n  distance = distance || 0\n  switch (units) {\n    case 'kilometers':\n      return distance / METERS_KILOMETERS\n    case 'feet':\n      return distance / METERS_FEET\n    case 'yards':\n      return distance / METERS_YARDS\n    case 'miles':\n      return distance / METERS_MILES\n    case 'nautical miles':\n      return distance / METERS_NAUTICAL_MILES\n    case 'meters':\n    default:\n      return distance\n  }\n}\n\nexport { getDistanceInMeters, getDistanceFromMeters }\n","/**\n * Copyright (c) Codice Foundation\n *\n * This is free software: you can redistribute it and/or modify it under the terms of the GNU Lesser\n * General Public License as published by the Free Software Foundation, either version 3 of the\n * License, or any later version.\n *\n * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without\n * even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n * Lesser General Public License for more details. A copy of the GNU Lesser General Public License\n * is distributed along with this program and can be found at\n * <http://www.gnu.org/licenses/lgpl.html>.\n *\n **/\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n// jshint ignore: start\nconst moment = require('moment')\n\nconst comparisonClass = 'Comparison',\n  logicalClass = 'Logical',\n  spatialClass = 'Spatial',\n  temporalClass = 'Temporal',\n  timePatter = /([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(\\.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?/i,\n  patterns = {\n    //Allows for non-standard single-quoted property names\n    PROPERTY: /^([_a-zA-Z]\\w*|\"[^\"]+\"|'[^']+')/,\n    COMPARISON: /^(=|<>|<=|<|>=|>|LIKE|ILIKE)/i,\n    IS_NULL: /^IS NULL/i,\n    COMMA: /^,/,\n    LOGICAL: /^(AND|OR)/i,\n    VALUE: /^('([^']|'')*'|-?\\d+(\\.\\d*)?|\\.\\d+)/,\n    FILTER_FUNCTION: /^[a-z]\\w+\\(/,\n    BOOLEAN: /^(false|true)/i,\n    LPAREN: /^\\(/,\n    RPAREN: /^\\)/,\n    SPATIAL: /^(BBOX|INTERSECTS|DWITHIN|WITHIN|CONTAINS)/i,\n    UNITS: /^(meters)/i,\n    NOT: /^NOT/i,\n    BETWEEN: /^BETWEEN/i,\n    BEFORE: /^BEFORE/i,\n    AFTER: /^AFTER/i,\n    DURING: /^DURING/i,\n    RELATIVE: /^'RELATIVE\\([A-Za-z0-9.]*\\)'/i,\n    TIME: new RegExp('^' + timePatter.source),\n    TIME_PERIOD: new RegExp('^' + timePatter.source + '/' + timePatter.source),\n    GEOMETRY(text) {\n      const type = /^(POINT|LINESTRING|POLYGON|MULTIPOINT|MULTILINESTRING|MULTIPOLYGON|GEOMETRYCOLLECTION)/.exec(\n        text\n      )\n      if (type) {\n        const len = text.length\n        let idx = text.indexOf('(', type[0].length)\n        if (idx > -1) {\n          let depth = 1\n          while (idx < len && depth > 0) {\n            idx++\n            switch (text.charAt(idx)) {\n              case '(':\n                depth++\n                break\n              case ')':\n                depth--\n                break\n              default:\n              // in default case, do nothing\n            }\n          }\n        }\n        return [text.substr(0, idx + 1)]\n      }\n    },\n    END: /^$/,\n  },\n  follows = {\n    ROOT_NODE: [\n      'NOT',\n      'GEOMETRY',\n      'SPATIAL',\n      'FILTER_FUNCTION',\n      'PROPERTY',\n      'LPAREN',\n    ],\n    LPAREN: [\n      'NOT',\n      'GEOMETRY',\n      'SPATIAL',\n      'FILTER_FUNCTION',\n      'PROPERTY',\n      'VALUE',\n      'LPAREN',\n    ],\n    RPAREN: ['NOT', 'LOGICAL', 'END', 'RPAREN', 'COMPARISON', 'COMMA'],\n    PROPERTY: [\n      'COMPARISON',\n      'BETWEEN',\n      'COMMA',\n      'IS_NULL',\n      'BEFORE',\n      'AFTER',\n      'DURING',\n      'RPAREN',\n    ],\n    BETWEEN: ['VALUE'],\n    IS_NULL: ['RPAREN', 'LOGICAL', '[', ']'],\n    COMPARISON: ['RELATIVE', 'VALUE', 'BOOLEAN'],\n    COMMA: ['FILTER_FUNCTION', 'GEOMETRY', 'VALUE', 'UNITS', 'PROPERTY'],\n    VALUE: ['LOGICAL', 'COMMA', 'RPAREN', 'END'],\n    BOOLEAN: ['RPAREN'],\n    SPATIAL: ['LPAREN'],\n    UNITS: ['RPAREN'],\n    LOGICAL: [\n      'FILTER_FUNCTION',\n      'NOT',\n      'VALUE',\n      'SPATIAL',\n      'PROPERTY',\n      'LPAREN',\n    ],\n    NOT: ['PROPERTY', 'LPAREN'],\n    GEOMETRY: ['COMMA', 'RPAREN'],\n    BEFORE: ['TIME'],\n    AFTER: ['TIME'],\n    DURING: ['TIME_PERIOD'],\n    TIME: ['LOGICAL', 'RPAREN', 'END'],\n    TIME_PERIOD: ['LOGICAL', 'RPAREN', 'END'],\n    RELATIVE: ['RPAREN'],\n    FILTER_FUNCTION: ['LPAREN', 'PROPERTY', 'VALUE', 'RPAREN'],\n  },\n  precedence = {\n    RPAREN: 3,\n    LOGICAL: 2,\n    COMPARISON: 1,\n  },\n  classes = {\n    '=': comparisonClass,\n    '<>': comparisonClass,\n    '<': comparisonClass,\n    '<=': comparisonClass,\n    '>': comparisonClass,\n    '>=': comparisonClass,\n    LIKE: comparisonClass,\n    ILIKE: comparisonClass,\n    BETWEEN: comparisonClass,\n    'IS NULL': comparisonClass,\n    AND: logicalClass,\n    OR: logicalClass,\n    NOT: logicalClass,\n    BBOX: spatialClass,\n    INTERSECTS: spatialClass,\n    DWITHIN: spatialClass,\n    WITHIN: spatialClass,\n    CONTAINS: spatialClass,\n    GEOMETRY: spatialClass,\n    BEFORE: temporalClass,\n    AFTER: temporalClass,\n    DURING: temporalClass,\n  },\n  // as an improvement, these could be figured out while building the syntax tree\n  filterFunctionParamCount = {\n    proximity: 3,\n    pi: 0,\n  },\n  dateTimeFormat = \"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'\"\n\nfunction tryToken(text, pattern) {\n  if (pattern instanceof RegExp) {\n    return pattern.exec(text)\n  } else {\n    return pattern(text)\n  }\n}\n\nfunction nextToken(text, tokens) {\n  let i,\n    token,\n    len = tokens.length\n  for (i = 0; i < len; i++) {\n    token = tokens[i]\n    const pat = patterns[token]\n    const matches = tryToken(text, pat)\n    if (matches) {\n      const match = matches[0]\n      const remainder = text.substr(match.length).replace(/^\\s*/, '')\n      return {\n        type: token,\n        text: match,\n        remainder,\n      }\n    }\n  }\n\n  let msg = 'ERROR: In parsing: [' + text + '], expected one of: '\n  for (i = 0; i < len; i++) {\n    token = tokens[i]\n    msg += '\\n    ' + token + ': ' + patterns[token]\n  }\n\n  throw new Error(msg)\n}\n\nfunction tokenize(text) {\n  const results = []\n  let token,\n    expect = follows['ROOT_NODE']\n\n  do {\n    token = nextToken(text, expect)\n    text = token.remainder\n    expect = follows[token.type]\n    if (token.type !== 'END' && !expect) {\n      throw new Error('No follows list for ' + token.type)\n    }\n    results.push(token)\n  } while (token.type !== 'END')\n\n  return results\n}\n\n// Mapping of Intrigue's query language syntax to CQL syntax\nconst userqlToCql = {\n  '*': '%',\n  '?': '_',\n  '%': '\\\\%',\n  _: '\\\\_',\n}\n\nconst translateUserqlToCql = str =>\n  str.replace(\n    /([^*?%_])?([*?%_])/g,\n    (_, a = '', b) => a + (a === '\\\\' ? b : userqlToCql[b])\n  )\n\n//Mapping of CQL syntax to Intrigue's query language syntax\nconst cqlToUserql = {\n  '%': '*',\n  _: '?',\n}\n\nconst translateCqlToUserql = str =>\n  str.replace(\n    /([^%_])?([%_])/g,\n    (_, a = '', b) => (a === '\\\\' ? b : a + cqlToUserql[b])\n  )\n\nfunction buildAst(tokens) {\n  const operatorStack = [],\n    postfix = []\n\n  while (tokens.length) {\n    const tok = tokens.shift()\n    switch (tok.type) {\n      case 'PROPERTY':\n        // Remove single and double quotes if they exist in property name\n        tok.text = tok.text.replace(/^'|'$/g, '')\n        tok.text = tok.text.replace(/^\"|\"$/g, '')\n      case 'GEOMETRY':\n      case 'VALUE':\n      case 'TIME':\n      case 'TIME_PERIOD':\n      case 'RELATIVE':\n      case 'BOOLEAN':\n        postfix.push(tok)\n        break\n      case 'COMPARISON':\n      case 'BETWEEN':\n      case 'IS_NULL':\n      case 'LOGICAL':\n      case 'BEFORE':\n      case 'AFTER':\n      case 'DURING':\n        const p = precedence[tok.type]\n\n        while (\n          operatorStack.length > 0 &&\n          precedence[operatorStack[operatorStack.length - 1].type] <= p\n        ) {\n          postfix.push(operatorStack.pop())\n        }\n\n        operatorStack.push(tok)\n        break\n      case 'SPATIAL':\n      case 'NOT':\n      case 'LPAREN':\n        operatorStack.push(tok)\n        break\n      case 'FILTER_FUNCTION':\n        operatorStack.push(tok)\n        // insert a '(' manually because we lost the original LPAREN matching the FILTER_FUNCTION regex\n        operatorStack.push({ type: 'LPAREN' })\n        break\n      case 'RPAREN':\n        while (\n          operatorStack.length > 0 &&\n          operatorStack[operatorStack.length - 1].type !== 'LPAREN'\n        ) {\n          postfix.push(operatorStack.pop())\n        }\n        operatorStack.pop() // toss out the LPAREN\n\n        // if this right parenthesis ends a function argument list (it's not for a logical grouping),\n        // it's now time to add that function to the postfix-ordered list\n        const lastOperatorType =\n          operatorStack.length > 0 &&\n          operatorStack[operatorStack.length - 1].type\n        if (\n          lastOperatorType === 'SPATIAL' ||\n          lastOperatorType === 'FILTER_FUNCTION'\n        ) {\n          postfix.push(operatorStack.pop())\n        }\n        break\n      case 'COMMA':\n      case 'END':\n      case 'UNITS':\n        break\n      default:\n        throw new Error('Unknown token type ' + tok.type)\n    }\n  }\n\n  while (operatorStack.length > 0) {\n    postfix.push(operatorStack.pop())\n  }\n\n  function buildTree() {\n    let value,\n      property,\n      tok = postfix.pop()\n    switch (tok.type) {\n      case 'LOGICAL':\n        const rhs = buildTree(),\n          lhs = buildTree()\n        return {\n          filters: [lhs, rhs],\n          type: tok.text.toUpperCase(),\n        }\n      case 'NOT':\n        const operand = buildTree()\n        return {\n          filters: [operand],\n          type: tok.type,\n        }\n      case 'BETWEEN':\n        let min, max\n        postfix.pop() // unneeded AND token here\n        max = buildTree()\n        min = buildTree()\n        property = buildTree()\n        return {\n          property,\n          lowerBoundary: min,\n          upperBoundary: max,\n          type: tok.type,\n        }\n      case 'BEFORE':\n      case 'AFTER':\n        value = buildTree()\n        property = buildTree()\n        return {\n          property,\n          value: moment(value).toISOString(),\n          type: tok.text.toUpperCase(),\n        }\n      case 'DURING':\n        const dates = buildTree().split('/')\n        property = buildTree()\n        return {\n          property,\n          from: dates[0],\n          to: dates[1],\n          type: tok.text.toUpperCase(),\n        }\n      case 'COMPARISON':\n        value = buildTree()\n        property = buildTree()\n        return {\n          property,\n          value,\n          type: tok.text.toUpperCase(),\n        }\n      case 'IS_NULL':\n        property = buildTree()\n        return {\n          property,\n          type: tok.text.toUpperCase(),\n        }\n      case 'VALUE':\n        const match = tok.text.match(/^'(.*)'$/)\n        if (match) {\n          return translateCqlToUserql(match[1].replace(/''/g, \"'\"))\n        } else {\n          return Number(tok.text)\n        }\n      case 'BOOLEAN':\n        switch (tok.text.toUpperCase()) {\n          case 'TRUE':\n            return true\n          default:\n            return false\n        }\n      case 'SPATIAL':\n        switch (tok.text.toUpperCase()) {\n          case 'BBOX':\n            const maxy = buildTree(),\n              maxx = buildTree(),\n              miny = buildTree(),\n              minx = buildTree(),\n              prop = buildTree()\n\n            return {\n              type: tok.text.toUpperCase(),\n              property: prop,\n              value: [minx, miny, maxx, maxy],\n            }\n          case 'INTERSECTS':\n            value = buildTree()\n            property = buildTree()\n            return {\n              type: tok.text.toUpperCase(),\n              property,\n              value,\n            }\n          case 'WITHIN':\n            value = buildTree()\n            property = buildTree()\n            return {\n              type: tok.text.toUpperCase(),\n              property,\n              value,\n            }\n          case 'CONTAINS':\n            value = buildTree()\n            property = buildTree()\n            return {\n              type: tok.text.toUpperCase(),\n              property,\n              value,\n            }\n          case 'DWITHIN':\n            const distance = buildTree()\n            value = buildTree()\n            property = buildTree()\n            return {\n              type: tok.text.toUpperCase(),\n              value,\n              property,\n              distance: Number(distance),\n            }\n        }\n        break\n      case 'GEOMETRY':\n        return {\n          type: tok.type,\n          value: tok.text,\n        }\n      case 'RELATIVE':\n        return tok.text.substring(1, tok.text.length - 1)\n      case 'FILTER_FUNCTION':\n        const filterFunctionName = tok.text.slice(0, -1) // remove trailing '('\n        const paramCount = filterFunctionParamCount[filterFunctionName]\n        if (paramCount === undefined) {\n          throw new Error('Unsupported filter function: ' + filterFunctionName)\n        }\n\n        const params = Array.apply(null, Array(paramCount))\n          .map(() => buildTree())\n          .reverse()\n\n        return {\n          type: tok.type,\n          filterFunctionName,\n          params,\n        }\n\n      default:\n        return tok.text\n    }\n  }\n\n  const result = buildTree()\n  if (postfix.length > 0) {\n    let msg = 'Remaining tokens after building AST: \\n'\n    for (let i = postfix.length - 1; i >= 0; i--) {\n      msg += postfix[i].type + ': ' + postfix[i].text + '\\n'\n    }\n    throw new Error(msg)\n  }\n\n  return result\n}\n\nfunction wrap(property) {\n  let wrapped = property\n  if (!wrapped.startsWith('\"')) {\n    wrapped = '\"' + wrapped\n  }\n  if (!wrapped.endsWith('\"')) {\n    wrapped = wrapped + '\"'\n  }\n  return wrapped\n}\n\nfunction write(filter) {\n  switch (classes[filter.type]) {\n    case spatialClass:\n      switch (filter.type) {\n        case 'BBOX':\n          const xmin = filter.value[0],\n            ymin = filter.value[1],\n            xmax = filter.value[2],\n            ymax = filter.value[3]\n          return (\n            'BBOX(' +\n            wrap(filter.property) +\n            ',' +\n            xmin +\n            ',' +\n            ymin +\n            ',' +\n            xmax +\n            ',' +\n            ymax +\n            ')'\n          )\n        case 'DWITHIN':\n          return (\n            'DWITHIN(' +\n            wrap(filter.property) +\n            ', ' +\n            write(filter.value) +\n            ', ' +\n            filter.distance +\n            ', meters)'\n          )\n        case 'WITHIN':\n          return (\n            'WITHIN(' + wrap(filter.property) + ', ' + write(filter.value) + ')'\n          )\n        case 'INTERSECTS':\n          return (\n            'INTERSECTS(' +\n            wrap(filter.property) +\n            ', ' +\n            write(filter.value) +\n            ')'\n          )\n        case 'CONTAINS':\n          return (\n            'CONTAINS(' +\n            wrap(filter.property) +\n            ', ' +\n            write(filter.value) +\n            ')'\n          )\n        case 'GEOMETRY':\n          return filter.value\n        default:\n          throw new Error('Unknown spatial filter type: ' + filter.type)\n      }\n    case logicalClass:\n      if (filter.type === 'NOT') {\n        // TODO: deal with precedence of logical operators to\n        // avoid extra parentheses (not urgent)\n        return 'NOT (' + write(filter.filters[0]) + ')'\n      } else {\n        let res = '('\n        let first = true\n        for (let i = 0; i < filter.filters.length; i++) {\n          if (first) {\n            first = false\n          } else {\n            res += ') ' + filter.type + ' ('\n          }\n          res += write(filter.filters[i])\n        }\n        return res + ')'\n      }\n    case comparisonClass:\n      if (filter.type === 'IS NULL') {\n        return `(\"${filter.property}\" ${filter.type})`\n      }\n      if (filter.type === 'BETWEEN') {\n        return (\n          wrap(filter.property) +\n          ' BETWEEN ' +\n          write(filter.lowerBoundary) +\n          ' AND ' +\n          write(filter.upperBoundary)\n        )\n      } else {\n        let property =\n          typeof filter.property === 'object'\n            ? write(filter.property)\n            : wrap(filter.property)\n        return filter.value !== null\n          ? property + ' ' + filter.type + ' ' + write(filter.value)\n          : property + ' ' + filter.type\n      }\n    case temporalClass:\n      const toStringDate = date => {\n        if (typeof date.toISOString === 'function') {\n          return date.toISOString()\n        }\n        return date.toString()\n      }\n\n      switch (filter.type) {\n        case 'BEFORE':\n        case 'AFTER':\n          return (\n            wrap(filter.property) +\n            ' ' +\n            filter.type +\n            ' ' +\n            toStringDate(filter.value)\n          )\n        case 'DURING':\n          return (\n            wrap(filter.property) +\n            ' ' +\n            filter.type +\n            ' ' +\n            toStringDate(filter.from) +\n            '/' +\n            toStringDate(filter.to)\n          )\n      }\n      break\n    case undefined:\n      if (filter.type == 'FILTER_FUNCTION') {\n        return (\n          filter.filterFunctionName +\n          '(' +\n          filter.params.map(param => write(param)).join(',') +\n          ')'\n        )\n      } else if (typeof filter === 'string') {\n        return translateUserqlToCql(\"'\" + filter.replace(/'/g, \"''\") + \"'\")\n      } else if (typeof filter === 'number') {\n        return String(filter)\n      } else if (typeof filter === 'boolean') {\n        return Boolean(filter)\n      }\n      break\n    default:\n      throw new Error(\"Can't encode: \" + filter.type + ' ' + filter)\n  }\n}\n\nfunction simplifyFilters(cqlAst) {\n  for (let i = 0; i < cqlAst.filters.length; i++) {\n    if (simplifyAst(cqlAst.filters[i], cqlAst)) {\n      const filtersToMerge = cqlAst.filters.splice(i, 1)[0]\n      filtersToMerge.filters.forEach(filter => {\n        cqlAst.filters.push(filter)\n      })\n    }\n  }\n}\n\nfunction simplifyAst(cqlAst, parentNode) {\n  if (!cqlAst.filters && parentNode) {\n    return false\n  } else if (!parentNode) {\n    if (cqlAst.filters) {\n      simplifyFilters(cqlAst)\n    }\n    return cqlAst\n  } else {\n    simplifyFilters(cqlAst)\n    if (cqlAst.type === parentNode.type) {\n      return true\n    } else {\n      return false\n    }\n  }\n}\n\nfunction collapseNOTs(cqlAst, parentNode) {\n  if (cqlAst.filters) {\n    cqlAst.filters.forEach(filter => {\n      collapseNOTs(filter, cqlAst)\n    })\n    if (cqlAst.type === 'NOT') {\n      cqlAst.type =\n        cqlAst.type +\n        ' ' +\n        (cqlAst.filters[0].filters ? cqlAst.filters[0].type : 'AND')\n      cqlAst.filters = cqlAst.filters[0].filters || cqlAst.filters\n    }\n  }\n}\n\nfunction uncollapseNOTs(cqlAst, parentNode) {\n  if (cqlAst.filters) {\n    cqlAst.filters.forEach(filter => {\n      uncollapseNOTs(filter, cqlAst)\n    })\n    if (cqlAst.type === 'NOT OR') {\n      cqlAst.type = 'NOT'\n      cqlAst.filters = [\n        {\n          type: 'OR',\n          filters: cqlAst.filters,\n        },\n      ]\n    } else if (cqlAst.type === 'NOT AND') {\n      cqlAst.type = 'NOT'\n      cqlAst.filters = [\n        {\n          type: 'AND',\n          filters: cqlAst.filters,\n        },\n      ]\n    }\n  }\n}\n\nfunction iterativelySimplify(cqlAst) {\n  let prevAst = JSON.parse(JSON.stringify(cqlAst))\n  simplifyAst(cqlAst)\n  while (JSON.stringify(prevAst) !== JSON.stringify(cqlAst)) {\n    prevAst = JSON.parse(JSON.stringify(cqlAst))\n    simplifyAst(cqlAst)\n  }\n}\n\nmodule.exports = {\n  read(cql) {\n    if (cql === undefined || cql.length === 0) {\n      return {\n        type: 'AND',\n        filters: [],\n      }\n    }\n    return buildAst(tokenize(cql))\n  },\n  write(filter) {\n    uncollapseNOTs(filter)\n    return write(filter)\n  },\n  simplify(cqlAst) {\n    iterativelySimplify(cqlAst)\n    collapseNOTs(cqlAst)\n    iterativelySimplify(cqlAst)\n    return cqlAst\n  },\n  translateCqlToUserql,\n  translateUserqlToCql,\n}\n","const { Map, List } = require('immutable')\nconst { combineReducers } = require('redux')\n\n// transport\n\nconst { createTransport } = require('./transport')\n\nconst rootStateKey = 'query.reducer'\n\nconst getLocalState = state => state[rootStateKey]\n// actions\n\nconst getTransport = state => getLocalState(state).transport\n\nconst initTransport = type => async (dispatch, getState) => {\n  const transport = getTransport(getState())\n\n  if (transport !== null) {\n    await transport.close()\n  }\n\n  dispatch({\n    type: 'query/SET-TRANSPORT',\n    transport: createTransport({ type }),\n  })\n}\n\nconst closeTransport = () => async (dispatch, getState) => {\n  const transport = getTransport(getState())\n\n  if (transport !== null) {\n    await transport.close()\n  }\n\n  dispatch({\n    type: 'query/SET-TRANSPORT',\n    transport: null,\n  })\n}\n\nconst runQuery = query => ({ type: 'query/RUN-QUERY', query })\n\nconst clearQuery = queryId => ({ type: 'query/CLEAR-QUERY', queryId })\n\nconst cancelQuery = (queryId, sourceId) => (dispatch, getState) => {\n  const { sourceRequest } = getLocalState(getState())\n  const request = sourceRequest.getIn([queryId, sourceId])\n\n  dispatch({\n    type: 'query/SOURCE-CANCELED',\n    queryId,\n    sourceId,\n  })\n\n  if (request !== undefined) {\n    request.abort()\n  }\n}\n\nconst getSourceStatus = (state, { queryId, sourceId }) => {\n  const { sourceStatus } = getLocalState(state)\n  return sourceStatus.getIn([queryId, sourceId], {}).type\n}\n\nconst isCanceled = (state, id) => {\n  return getSourceStatus(state, id) === 'source.canceled'\n}\n\nconst sleep = timeout =>\n  new Promise(resolve => {\n    setTimeout(resolve, timeout)\n  })\n\nconst executeQuery = ({ srcs, ...query }) => async (dispatch, getState) => {\n  const { send } = getTransport(getState())\n\n  dispatch(runQuery({ srcs, ...query }))\n\n  const responses = srcs.map(async src => {\n    const sourceId = src\n    const queryId = query.id\n\n    const next = action => {\n      dispatch({\n        ...action,\n        sourceId,\n        queryId,\n      })\n    }\n\n    const id = { queryId: query.id, sourceId: src }\n\n    try {\n      const req = send({ src, ...query })\n\n      next({\n        type: 'query/SOURCE-START',\n        request: req,\n      })\n\n      const json = await req.json()\n\n      if (isCanceled(getState(), id)) {\n        return\n      }\n\n      next({ type: 'query/SOURCE-RETURNED' })\n\n      if (isCanceled(getState(), id)) {\n        return\n      }\n\n      next({\n        type: 'query/SOURCE-RESULTS',\n        info: json.status,\n        response: json,\n      })\n    } catch (e) {\n      if (isCanceled(getState(), id)) {\n        return\n      }\n\n      return next({\n        type: 'query/SOURCE-ERROR',\n        info: e,\n      })\n    }\n  })\n\n  return Promise.all(responses)\n}\n\n// reducers\n\nconst transport = (state = null, action) => {\n  switch (action.type) {\n    case 'query/SET-TRANSPORT':\n      return action.transport\n    default:\n      return state\n  }\n}\n\n// { queryId -> query }\nconst queries = (state = Map(), action) => {\n  switch (action.type) {\n    case 'query/RUN-QUERY':\n      return state.set(action.query.id, action.query)\n    case 'query/CLEAR-QUERY':\n      return state.remove(action.queryId)\n    default:\n      return state\n  }\n}\n\n// queryId -> sourceId -> info\nconst sourceReducer = fn => (state = Map(), action) => {\n  if (action.type === 'query/CLEAR-QUERY') {\n    return state.remove(action.queryId)\n  }\n\n  if (action.queryId && action.sourceId) {\n    const { queryId, sourceId } = action\n    return state.updateIn([queryId, sourceId], state => {\n      return fn(state, action)\n    })\n  }\n\n  return state\n}\n\nconst sourceRequest = sourceReducer((state, action) => {\n  switch (action.type) {\n    case 'query/SOURCE-START':\n      return action.request\n\n    case 'query/SOURCE-ERROR':\n    case 'query/SOURCE-CANCELED':\n    case 'query/SOURCE-RETURNED':\n      return null\n\n    default:\n      return state\n  }\n})\n\n//if you modify a query, running a specific source search should use the new criteria\n// { queryId -> sourceId -> sourceResponse }\nconst sourceResponse = (state = Map(), action) => {\n  switch (action.type) {\n    case 'query/SOURCE-START': {\n      const { queryId, sourceId } = action\n      return state.removeIn([queryId, sourceId])\n    }\n    case 'query/RUN-QUERY':\n      return state.update(action.query.id, (responses = Map()) => {\n        return responses.removeAll(action.query.srcs)\n      })\n    case 'query/SOURCE-RESULTS': {\n      const { queryId, sourceId } = action\n      const { types, results, ...sourceResponse } = action.response\n      return state.update(queryId, (map = Map()) => {\n        return map.set(sourceId, {\n          ...sourceResponse,\n          results: results.map(result => result.metacard.properties.id),\n        })\n      })\n    }\n\n    case 'query/CLEAR-QUERY':\n      return state.remove(action.queryId)\n\n    default:\n      return state\n  }\n}\n\nconst sourceStatus = sourceReducer((state = {}, action) => {\n  const statusMap = Map({\n    'query/SOURCE-START': 'source.pending',\n    'query/SOURCE-RESULTS': 'source.success',\n    'query/SOURCE-RETURNED': 'source.success',\n    'query/SOURCE-ERROR': 'source.error',\n    'query/SOURCE-CANCELED': 'source.canceled',\n  })\n\n  if (statusMap.has(action.type)) {\n    const type = statusMap.get(action.type)\n    return { type, info: action.info }\n  }\n\n  return state\n})\n\n// { [sourceId metacardId] -> result }\nconst results = (state = Map(), action) => {\n  switch (action.type) {\n    case 'query/SOURCE-RESULTS':\n      const sourceId = action.response.status.id\n      return state.withMutations(state => {\n        action.response.results.forEach(result => {\n          const metacardId = result.metacard.properties.id\n          state.set(metacardId, result)\n        })\n      })\n    default:\n      return state\n  }\n}\n\nconst types = (state = Map(), action) => {\n  switch (action.type) {\n    case 'query/SOURCE-RESULTS':\n      return state.merge(action.response.types)\n    default:\n      return state\n  }\n}\n\nconst getQueryStatus = queryId => state => {\n  const status = getLocalState(state).sourceStatus.get(queryId, Map())\n  return status.toJSON()\n}\n\nconst isQueryPending = queryId => state => {\n  const pending = getLocalState(state)\n    .sourceStatus.get(queryId, Map())\n    .filter(status => status === 'source.pending')\n\n  return pending.size !== 0\n}\n\nconst getTypes = state => {\n  return getLocatlState(state).types.toJSON()\n}\n\nconst getQueryResponse = queryId => state => {\n  const sourceResponse = getLocalState(state).sourceResponse.get(queryId, Map())\n\n  const response = sourceResponse.get('ddf.distribution', { results: [] })\n\n  return response.results.map(id => {\n    return getLocalState(state).results.get(id)\n  })\n}\n\nconst getMetacards = state => {\n  return getLocalState(state).results.toJSON()\n}\n\nconst getMetacard = metacardId => state => {\n  const metacard = getLocalState(state).results.get(metacardId)\n  if (metacard !== undefined) {\n    return metacard\n  }\n}\n\nconst reducers = {\n  [rootStateKey]: combineReducers({\n    transport,\n    queries,\n    results,\n    sourceStatus,\n    sourceRequest,\n    sourceResponse,\n    types,\n  }),\n}\n\nmodule.exports = {\n  reducers,\n  initTransport,\n  isQueryPending,\n  clearQuery,\n  cancelQuery,\n  closeTransport,\n  executeQuery,\n  getQueryStatus,\n  getMetacards,\n  rootStateKey,\n  getQueryResponse,\n}\n","const fetch = require('node-fetch')\nprocess.env.NODE_TLS_REJECT_UNAUTHORIZED = 0\nconst Client = require('rpc-websockets').Client\n\nconst { write } = require('../cql')\n\nconst getCql = ({ filterTree, cql }) => {\n  if (filterTree !== undefined) {\n    return '(' + write(filterTree) + ')'\n  }\n  return cql\n}\n\nconst processQuery = ({ filterTree, cql, ...query }) => {\n  const cqlString = getCql({ filterTree, cql })\n  return JSON.stringify({ cql: cqlString, ...query })\n}\n\nconst handleError = (code, data) => {\n  let e = null\n\n  try {\n    const json = typeof data === 'string' ? JSON.parse(data) : data\n    const message = json.message || 'Unknown error'\n    const error = Error(`${code}: ${message}`)\n    error.data = json\n    e = error\n  } catch (_) {\n    e = Error(data)\n  }\n\n  e.code = code\n  throw e\n}\n\nconst createHttpTransport = opts => {\n  const { protocol, hostname, port, pathname } = opts\n\n  const url = `${protocol}//${hostname}:${port}${pathname}internal/cql`\n\n  const send = query => {\n    const controller = new AbortController()\n\n    const response = fetch(url, {\n      headers: opts.headers,\n      method: 'POST',\n      signal: controller.signal,\n      body: processQuery(query),\n      ...opts.httpOpts,\n    })\n\n    const abort = () => controller.abort()\n\n    const json = async () => {\n      const res = await response\n\n      if (!res.ok) {\n        handleError(res.status, await res.text())\n      }\n\n      return res.json()\n    }\n\n    return { json, abort }\n  }\n\n  const close = () => {}\n\n  return { send, close }\n}\n\nconst createWsTransport = opts => {\n  const { protocol, hostname, port, pathname } = opts\n\n  const wsProtocol = { 'http:': 'ws:', 'https:': 'wss:' }\n  const url = `${wsProtocol[protocol]}//${hostname}:${port}${pathname}ws`\n\n  const rpc = new Promise((resolve, reject) => {\n    const client = new Client(url, {\n      headers: opts.headers,\n      ...opts.wsOpts,\n    })\n    client.on('error', reject)\n    client.on('open', () => {\n      resolve(client)\n    })\n  })\n\n  rpc.catch(() => {})\n\n  const send = async query => {\n    const client = await rpc\n\n    try {\n      return await client.call('query', [processQuery(query)])\n    } catch (e) {\n      handleError(e.code, e)\n    }\n  }\n\n  const close = async () => {\n    const client = await rpc\n    client.close()\n  }\n\n  return { send, close }\n}\n\nconst defaultOptions = {\n  protocol: 'https:',\n  hostname: 'localhost',\n  port: 8993,\n  pathname: '/search/catalog/',\n}\n\nconst modes = {\n  ws: createWsTransport,\n  http: createHttpTransport,\n}\n\nexports.createTransport = (opts = {}) => {\n  const options = { ...defaultOptions, ...opts, ...window.location }\n  const { type = 'http', hostname } = options\n\n  const auth = Buffer.from('admin:admin').toString('base64')\n\n  const headers = {\n    'User-Agent': 'ace',\n    'X-Requested-With': 'XMLHttpRequest',\n    Authorization: `Basic ${auth}`,\n    'Content-Type': 'application/json',\n    Referer: `https://${hostname}:8993`,\n  }\n\n  const f = modes[type]\n\n  if (typeof f !== 'function') {\n    throw new Error(`Unsupport transport type '${type}'.`)\n  }\n\n  return f({ headers, ...options })\n}\n","import TextField from '@material-ui/core/TextField'\nimport { Map } from 'immutable'\nimport React from 'react'\nimport Units from './units'\nimport { getDistanceInMeters } from './distance-utils'\n\nexport const validate = (location = Map()) => {\n  const errors = {}\n  const { coordinates = [], bufferWidth = 0 } = location.toJSON()\n\n  if (typeof coordinates === 'string') {\n    errors.coordinates = `Invalid Line`\n  }\n\n  if (bufferWidth < 0) {\n    errors.bufferWidth = `Buffer width must be greater or equal to 0`\n  }\n  return errors\n}\n\nconst parseLine = line => line.map(([lon, lat]) => `${lon} ${lat}`).join()\n\nexport const generateFilter = (location = Map()) => {\n  const { coordinates, bufferWidth, unit } = location.toJSON()\n  return {\n    type: bufferWidth > 0 ? 'DWITHIN' : 'INTERSECTS',\n    property: 'anyGeo',\n    value: {\n      type: 'GEOMETRY',\n      value: `LINESTRING(${parseLine(coordinates)})`,\n    },\n    ...(bufferWidth > 0 && {\n      distance: getDistanceInMeters({ distance: bufferWidth, units: unit }),\n    }),\n    geojson: {\n      type: 'Feature',\n      geometry: {\n        type: 'LineString',\n        coordinates,\n      },\n      properties: {\n        type: 'LineString',\n        buffer: {\n          width: bufferWidth,\n          unit,\n        },\n      },\n    },\n  }\n}\n\nconst Line = props => {\n  const { value = Map(), onChange, errors = {} } = props\n  const { coordinates = '', bufferWidth = 0, unit = 'meters' } = value.toJSON()\n\n  return (\n    <div style={{ paddingTop: 10 }}>\n      <TextField\n        fullWidth\n        label=\"Line\"\n        error={errors.coordinates !== undefined}\n        helperText={errors.coordinates}\n        value={\n          typeof coordinates === 'string'\n            ? coordinates\n            : JSON.stringify(coordinates)\n        }\n        onChange={e => {\n          let coordinates = e.target.value\n          try {\n            coordinates = JSON.parse(coordinates)\n          } catch (e) {}\n          onChange(value.set('coordinates', coordinates))\n        }}\n      />\n      <div style={{ display: 'flex', paddingTop: 10 }}>\n        <div style={{ flex: '1', overflow: 'hidden' }}>\n          <TextField\n            fullWidth\n            type=\"number\"\n            label=\"Buffer Width\"\n            error={errors.bufferWidth !== undefined}\n            helperText={errors.bufferWidth}\n            value={bufferWidth}\n            onChange={e => {\n              onChange(value.set('bufferWidth', e.target.value))\n            }}\n          />\n        </div>\n        <div style={{ width: 20 }} />\n        <Units\n          value={unit}\n          onChange={e => {\n            onChange(value.set('unit', e.target.value))\n          }}\n        />\n      </div>\n    </div>\n  )\n}\n\nexport default Line\n","import FormControl from '@material-ui/core/FormControl'\nimport InputLabel from '@material-ui/core/InputLabel'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport Select from '@material-ui/core/Select'\nimport { Map } from 'immutable'\nimport React from 'react'\nimport Line, {\n  generateFilter as generateLineFilter,\n  validate as validateLine,\n} from './line'\nimport PointRadius, {\n  generateFilter as generatePointRadiusFilter,\n  validate as validatePointRadius,\n} from './point-radius'\nimport Polygon, {\n  generateFilter as generatePolygonFilter,\n  validate as validatePolygon,\n} from './polygon'\n\nexport const locationTypes = {\n  line: {\n    label: 'Line',\n    component: Line,\n    validate: validateLine,\n    generateFilter: generateLineFilter,\n  },\n  polygon: {\n    label: 'Polygon',\n    component: Polygon,\n    validate: validatePolygon,\n    generateFilter: generatePolygonFilter,\n  },\n  pointRadius: {\n    label: 'Point-Radius',\n    component: PointRadius,\n    validate: validatePointRadius,\n    generateFilter: generatePointRadiusFilter,\n  },\n  boundingBox: {\n    label: 'Bounding Box',\n    component: null,\n    validate: () => ({}),\n    generateFilter: () => null,\n  },\n  keyword: {\n    label: 'Keyword',\n    component: null,\n    validate: () => ({}),\n    generateFilter: () => null,\n  },\n}\n\nexport const validate = (location = Map()) => {\n  const type = location.get('type')\n  return locationTypes[type].validate(location.get('location'))\n}\n\nconst Location = ({ value = Map(), onChange, errors = {} }) => {\n  const [locations, setLocations] = React.useState(\n    Map({ [value.get('type')]: value })\n  )\n  const type = value.get('type')\n  const Component = locationTypes[type].component\n  const onSelection = e => {\n    setLocations(locations.set(type, value.get('location')))\n    onChange(\n      value\n        .set('type', e.target.value)\n        .set('location', locations.get(e.target.value))\n    )\n  }\n  return (\n    <FormControl fullWidth>\n      <InputLabel>Location</InputLabel>\n      <Select value={type ? type : 'line'} onChange={onSelection}>\n        {Object.keys(locationTypes).map(key => (\n          <MenuItem key={key} value={key}>\n            {locationTypes[key].label}\n          </MenuItem>\n        ))}\n      </Select>\n      {Component ? (\n        <Component\n          value={value.get('location')}\n          onChange={location => onChange(value.set('location', location))}\n          errors={errors}\n        />\n      ) : null}\n    </FormControl>\n  )\n}\n\nexport default Location\n","import { action } from '@connexta/ace/@storybook/addon-actions'\nimport { storiesOf } from '@connexta/ace/@storybook/react'\nimport { Map } from 'immutable'\nimport React from 'react'\nimport Line, { validate as validateLine } from './line'\nimport Location, { validate } from './location'\nimport PointRadius, { validate as validatePointRadius } from './point-radius'\nimport Polygon, { validate as validatePolygon } from './polygon'\n\nconst stories = storiesOf('Location', module)\nstories.addDecorator(Story => <Story />)\n\nconst lineState = Map({\n  coordinates: [[[0, 0], [1, 1], [2, 2], [3, 3]]],\n  bufferWidth: -1,\n  unit: 'meters',\n})\n\nstories.add('invalid line', () => {\n  const [state, setState] = React.useState(polygonState)\n  React.useEffect(() => action('validate')(validateLine(state)), [state])\n  return (\n    <Line\n      value={state}\n      onChange={newState => {\n        setState(newState)\n        action('onChange')(newState)\n      }}\n      errors={validateLine(state)}\n    />\n  )\n})\n\nconst polygonState = Map({\n  coordinates: [\n    [\n      [-108.721313, 37.124358],\n      [-99.349993, 37.124358],\n      [-99.349993, 31.105568],\n      [-108.721313, 31.105568],\n      [-108.721313, 37.124358],\n    ],\n  ],\n  bufferWidth: -1,\n  unit: 'meters',\n})\n\nstories.add('invalid polygon', () => {\n  const [state, setState] = React.useState(polygonState)\n  React.useEffect(() => action('validate')(validatePolygon(state)), [state])\n  return (\n    <Polygon\n      value={state}\n      onChange={newState => {\n        setState(newState)\n        action('onChange')(newState)\n      }}\n      errors={validatePolygon(state)}\n    />\n  )\n})\n\nconst pointRadiusState = Map({\n  lat: 91,\n  lon: -23.888006,\n  bufferWidth: 432.410439,\n  unit: 'miles',\n})\n\nstories.add('invalid point-radius', () => {\n  const [state, setState] = React.useState(pointRadiusState)\n  React.useEffect(() => action('validate')(validatePointRadius(state)), [state])\n  return (\n    <PointRadius\n      value={state}\n      onChange={newState => {\n        setState(newState)\n        action('onChange')(newState)\n      }}\n      errors={validatePointRadius(state)}\n    />\n  )\n})\n\nstories.add('basic', () => {\n  const [state, setState] = React.useState(\n    Map({\n      type: 'line',\n    })\n  )\n  React.useEffect(() => action('validate')(validate(state)), [state])\n  return (\n    <Location\n      value={state}\n      onChange={newState => {\n        setState(newState)\n        action('onChange')(newState)\n      }}\n      errors={validate(state)}\n    />\n  )\n})\n","import Tab from '@material-ui/core/Tab'\nimport Tabs from '@material-ui/core/Tabs'\nimport TextField from '@material-ui/core/TextField'\nimport { Map } from 'immutable'\nimport React from 'react'\nimport Units from './units'\n\nexport const validate = (location = Map()) => {\n  const errors = {}\n  const { lat, lon, bufferWidth } = location.toJSON()\n\n  if (lat < -90 || lat > 90) {\n    errors.lat = `Latitude must be between -90 and 90`\n  }\n\n  if (lon < -180 || lon > 180) {\n    errors.lon = `Longitude must be between -180 and 180`\n  }\n\n  if (bufferWidth < 0) {\n    errors.bufferWidth = `Buffer width must be greater or equal to 0`\n  }\n  return errors\n}\n\nexport const generateFilter = (location = Map()) => {\n  const { unit, bufferWidth, lat, lon } = location.toJSON()\n  return {\n    type: 'DWITHIN',\n    property: 'anyGeo',\n    value: {\n      type: 'GEOMETRY',\n      value: `POINT(${lon} ${lat})`,\n    },\n    distance: getDistanceInMeters({ distance: bufferWidth, units: unit }),\n    geojson: {\n      type: 'Feature',\n      geometry: {\n        type: 'Point',\n        coordinates: [lon, lat],\n      },\n      properties: {\n        type: 'Point',\n        buffer: {\n          width: bufferWidth,\n          unit,\n        },\n      },\n    },\n  }\n}\n\nconst LatLon = props => {\n  const { value, onChange, errors } = props\n  const {\n    lat = '',\n    lon = '',\n    bufferWidth = 0,\n    unit = 'meters',\n  } = value.toJSON()\n  return (\n    <div style={{ paddingTop: 10 }}>\n      <TextField\n        fullWidth\n        label=\"Lat\"\n        type=\"number\"\n        error={errors.lat !== undefined}\n        helperText={errors.lat}\n        value={lat}\n        onChange={e => {\n          onChange(value.set('lat', e.target.value))\n        }}\n      />\n      <TextField\n        fullWidth\n        label=\"Lon\"\n        type=\"number\"\n        error={errors.lon !== undefined}\n        helperText={errors.lon}\n        value={lon}\n        onChange={e => {\n          onChange(value.set('lon', e.target.value))\n        }}\n      />\n      <div style={{ display: 'flex', paddingTop: 10 }}>\n        <div style={{ flex: '1', overflow: 'hidden' }}>\n          <TextField\n            fullWidth\n            type=\"number\"\n            label=\"Buffer Width\"\n            error={errors.bufferWidth !== undefined}\n            helperText={errors.bufferWidth}\n            value={bufferWidth}\n            onChange={e => {\n              onChange(value.set('bufferWidth', e.target.value))\n            }}\n          />\n        </div>\n        <div style={{ width: 20 }} />\n        <Units\n          value={unit}\n          onChange={e => {\n            onChange(value.set('unit', e.target.value))\n          }}\n        />\n      </div>\n    </div>\n  )\n}\n\nconst tabMap = {\n  0: LatLon,\n  1: null,\n  2: null,\n  3: null,\n}\nconst PointRadius = props => {\n  const { value = Map(), onChange, errors = {} } = props\n  const [tab, setTab] = React.useState(0)\n  const Component = tabMap[tab]\n  return (\n    <div style={{ paddingTop: 10 }}>\n      <Tabs\n        value={tab}\n        onChange={(_, selectedIndex) => {\n          setTab(selectedIndex)\n        }}\n        indicatorColor=\"primary\"\n        textColor=\"primary\"\n        variant=\"fullWidth\"\n        aria-label=\"full width tabs example\"\n      >\n        <Tab label=\"Lat / Lon (DD)\" />\n        <Tab label=\"Lat / Lon (DMS)\" />\n        <Tab label=\"USNG / MGRS\" />\n        <Tab label=\"UTM / UPS\" />\n      </Tabs>\n      {Component ? (\n        <Component value={value} onChange={onChange} errors={errors} />\n      ) : null}\n    </div>\n  )\n}\n\nexport default PointRadius\n","import TextField from '@material-ui/core/TextField'\nimport { Map } from 'immutable'\nimport React from 'react'\nimport Units from './units'\nimport { getDistanceInMeters } from './distance-utils'\n\nexport const validate = (location = Map()) => {\n  const errors = {}\n  const { coordinates = [], bufferWidth = 0 } = location.toJSON()\n\n  if (typeof coordinates === 'string') {\n    errors.coordinates = `Invalid polygon`\n  }\n\n  if (bufferWidth < 0) {\n    errors.bufferWidth = `Buffer width must be greater or equal to 0`\n  }\n  return errors\n}\n\nconst parsePolygon = polygon =>\n  polygon.map(([lon, lat]) => `${lon} ${lat}`).join()\n\nexport const generateFilter = (location = Map()) => {\n  const { coordinates, bufferWidth, unit } = location.toJSON()\n  return {\n    type: bufferWidth > 0 ? 'DWITHIN' : 'INTERSECTS',\n    property: 'anyGeo',\n    value: {\n      type: 'GEOMETRY',\n      value: `POLYGON((${parsePolygon(coordinates)}))`,\n    },\n    ...(bufferWidth > 0 && {\n      distance: getDistanceInMeters({ distance: bufferWidth, units: unit }),\n    }),\n    geojson: {\n      type: 'Feature',\n      geometry: {\n        type: 'Polygon',\n        coordinates,\n      },\n      properties: {\n        type: 'Polygon',\n        buffer: {\n          width: bufferWidth,\n          unit,\n        },\n      },\n    },\n  }\n}\n\nconst Polygon = props => {\n  const { value = Map(), onChange, errors = {} } = props\n  const { coordinates = '', bufferWidth = 0, unit = 'meters' } = value.toJSON()\n\n  return (\n    <div style={{ paddingTop: 10 }}>\n      <TextField\n        fullWidth\n        label=\"Polygon\"\n        error={errors.coordinates !== undefined}\n        helperText={errors.coordinates}\n        value={\n          typeof coordinates === 'string'\n            ? coordinates\n            : JSON.stringify(coordinates)\n        }\n        onChange={e => {\n          let coordinates = e.target.value\n          try {\n            coordinates = JSON.parse(coordinates)\n          } catch (e) {}\n          onChange(value.set('coordinates', coordinates))\n        }}\n      />\n      <div style={{ display: 'flex', paddingTop: 10 }}>\n        <div style={{ flex: '1', overflow: 'hidden' }}>\n          <TextField\n            fullWidth\n            type=\"number\"\n            label=\"Buffer Width\"\n            error={errors.bufferWidth !== undefined}\n            helperText={errors.bufferWidth}\n            value={bufferWidth}\n            onChange={e => {\n              onChange(value.set('bufferWidth', e.target.value))\n            }}\n          />\n        </div>\n        <div style={{ width: 20 }} />\n        <Units\n          value={unit}\n          onChange={e => {\n            onChange(value.set('unit', e.target.value))\n          }}\n        />\n      </div>\n    </div>\n  )\n}\n\nexport default Polygon\n","import React, { Fragment } from 'react'\n\nimport CancelIcon from '@material-ui/icons/Cancel'\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport IconButton from '@material-ui/core/IconButton'\nimport List from '@material-ui/core/List'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport PlayCircleFilledIcon from '@material-ui/icons/PlayCircleFilled'\n\nimport Typography from '@material-ui/core/Typography'\nimport ErrorIcon from '@material-ui/icons/Error'\nimport Grid from '@material-ui/core/Grid'\n\nconst formatStatus = (status = 'Unknown', info = {}) => {\n  const props = {}\n\n  if (status === 'source.canceled' || status === 'source.error') {\n    return (\n      <Typography variant=\"subtitle2\" color=\"secondary\">\n        <Grid container alignItems=\"center\" spacing={1}>\n          <Grid item>\n            <ErrorIcon style={{ height: '0.8em' }} />\n          </Grid>\n          <Grid item>{info.message || status}</Grid>\n        </Grid>\n      </Typography>\n    )\n  }\n\n  if (status === 'source.success') {\n    const { hits, count, elapsed } = info\n    return (\n      <Typography variant=\"subtitle2\" color=\"textSecondary\">\n        Available: {count}, Possible: {hits}, Time: {elapsed}\n        ms\n      </Typography>\n    )\n  }\n\n  return (\n    <Typography variant=\"subtitle2\" color=\"textSecondary\">\n      {status}\n    </Typography>\n  )\n}\n\nconst Cancel = props => {\n  const { onCancel } = props\n  return (\n    <div style={{ position: 'relative' }}>\n      <IconButton\n        key=\"cancel\"\n        title=\"Cancel\"\n        color=\"secondary\"\n        onClick={onCancel}\n      >\n        <CancelIcon />\n      </IconButton>\n      <div\n        style={{\n          zIndex: -1,\n          position: 'absolute',\n          left: 0,\n          right: 0,\n          top: 0,\n          bottom: 0,\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n        }}\n      >\n        <CircularProgress size={30} />\n      </div>\n    </div>\n  )\n}\n\nconst Run = props => {\n  const { onRun } = props\n\n  return (\n    <IconButton key=\"run\" title=\"Run\" color=\"primary\" onClick={onRun}>\n      <PlayCircleFilledIcon />\n    </IconButton>\n  )\n}\n\nconst SourceStatus = props => {\n  const {\n    type,\n    info,\n    source,\n\n    onRun,\n    onCancel,\n  } = props\n\n  return (\n    <ListItem>\n      <ListItemText primary={source} secondary={formatStatus(type, info)} />\n      <ListItemSecondaryAction>\n        {type === 'source.pending' ? (\n          <Cancel onCancel={() => onCancel([source])} />\n        ) : (\n          <Run onRun={() => onRun([source])} />\n        )}\n      </ListItemSecondaryAction>\n    </ListItem>\n  )\n}\n\nconst QueryStatus = props => {\n  const { sources = {} } = props\n\n  return (\n    <List>\n      {Object.keys(sources).map(source => {\n        const { type, info } = sources[source]\n        return (\n          <SourceStatus\n            key={source}\n            source={source}\n            info={info}\n            type={type}\n            onRun={props.onRun}\n            onCancel={props.onCancel}\n          />\n        )\n      })}\n    </List>\n  )\n}\n\nexport default QueryStatus\n","import React, { useState } from 'react'\nimport { Set } from 'immutable'\nimport { storiesOf } from '@connexta/ace/@storybook/react'\nimport { withKnobs, number, select } from '@connexta/ace/@storybook/addon-knobs'\nimport { action } from '@connexta/ace/@storybook/addon-actions'\n\nconst stories = storiesOf('QueryStatus', module)\n\nstories.addDecorator(withKnobs)\nstories.addDecorator(Story => <Story />)\n\nimport QueryStatus from './query-status'\n\nstories.add('one of each', () => {\n  const info = {\n    hits: 10,\n    count: 5,\n    elapsed: 100,\n    id: 'ddf.distribution',\n    successful: true,\n  }\n\n  const error = new Error('Network Error')\n\n  const sources = {\n    'ddf.success': { type: 'source.success', info },\n    'ddf.pending': { type: 'source.pending' },\n    'ddf.canceled': { type: 'source.canceled' },\n    'ddf.error': { type: 'source.error', info: error },\n  }\n\n  return (\n    <QueryStatus\n      sources={sources}\n      onRun={action('onRun')}\n      onCancel={action('onCancel')}\n    />\n  )\n})\n","export { default as useKeyPressed } from './use-key-pressed'\nexport { default as useUndoState } from './use-undo-state'\n","import { useEffect, useState } from 'react'\n\nconst useKeyPressed = aKey => {\n  const [pressed, setPressed] = useState(false)\n\n  const onDown = ({ key }) => {\n    if (key === aKey) {\n      setPressed(true)\n    }\n  }\n\n  const onUp = ({ key }) => {\n    if (key === aKey) {\n      setPressed(false)\n    }\n  }\n\n  useEffect(() => {\n    document.addEventListener('keydown', onDown)\n    document.addEventListener('keyup', onUp)\n    return () => {\n      document.removeEventListener('keydown', onDown)\n      document.removeEventListener('keyup', onUp)\n    }\n  }, [])\n\n  return pressed\n}\n\nexport default useKeyPressed\n","import { useState } from 'react'\nimport { Map, List, is } from 'immutable'\n\nconst useUndoState = initialState => {\n  const [state, setState] = useState(\n    Map({\n      current: 0,\n      history: List([initialState]),\n    })\n  )\n\n  const history = state.get('history')\n  const current = state.get('current')\n\n  const currentState = history.get(current)\n\n  const setCurrentState = nextState => {\n    // prevent the same history item from being pushed to the stack twice\n    if (!is(currentState, nextState)) {\n      const update = state\n        .update('current', current => current + 1)\n        .update('history', history =>\n          history.slice(0, state.get('current') + 1).push(nextState)\n        )\n\n      setState(update)\n    }\n  }\n\n  const canUndo = current > 0\n  const onUndo = () => {\n    if (canUndo) {\n      setState(state.update('current', i => i - 1))\n    }\n  }\n  const canRedo = current < history.size - 1\n  const onRedo = () => {\n    if (canRedo) {\n      setState(state.update('current', i => i + 1))\n    }\n  }\n\n  return {\n    state: currentState,\n    setState: setCurrentState,\n    canUndo,\n    onUndo,\n    canRedo,\n    onRedo,\n  }\n}\n\nexport default useUndoState\n","import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport { Set } from 'immutable'\nimport { getSelected, setSelected } from '../store/results'\nimport { useKeyPressed } from '../react-hooks'\n\nimport Paper from '@material-ui/core/Card'\nimport Table from '@material-ui/core/Table'\nimport Toolbar from '@material-ui/core/Toolbar'\nimport Typography from '@material-ui/core/Typography'\nimport TableHead from '@material-ui/core/TableHead'\nimport TableRow from '@material-ui/core/TableRow'\nimport TableCell from '@material-ui/core/TableCell'\nimport TableBody from '@material-ui/core/TableBody'\nimport More from '@material-ui/icons/UnfoldMore'\nimport Less from '@material-ui/icons/UnfoldLess'\nimport DefaultThumbnail from '../thumbnail/thumbnail'\nimport Button from '@material-ui/core/Button'\n\nconst cellStyles = {\n  minWidth: 150,\n  maxWidth: 450,\n}\n\nconst ExpandButton = props => {\n  const { expanded, onClick } = props\n  return (\n    <Button\n      style={{\n        minWidth: 25,\n        marginLeft: 5,\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n      }}\n      onClick={onClick}\n    >\n      {expanded ? <Less /> : <More />}\n    </Button>\n  )\n}\n\nconst Description = props => {\n  const [expanded, setExpanded] = useState(false)\n  const { text } = props\n  const long = text.length > 250\n\n  return (\n    <div\n      style={{\n        ...cellStyles,\n        display: 'flex',\n        width: '20vw',\n        alignItems: 'stretch',\n      }}\n    >\n      <Typography>\n        {!long || expanded ? text : text.substring(0, 100).concat('...')}\n      </Typography>\n      {long ? (\n        <ExpandButton\n          expanded={expanded}\n          onClick={e => {\n            e.stopPropagation()\n            setExpanded(!expanded)\n          }}\n        />\n      ) : null}\n    </div>\n  )\n}\n\nconst getCellContent = (attribute, result, Thumbnail) => {\n  const { properties } = result.metacard\n  switch (attribute) {\n    case 'thumbnail':\n      return (\n        <div\n          style={{\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n          }}\n        >\n          <Thumbnail result={result} />\n        </div>\n      )\n    case 'description':\n      return <Description text={properties.description} />\n    default:\n      return (\n        <Typography style={{ ...cellStyles }}>\n          {properties[attribute]}\n        </Typography>\n      )\n  }\n}\n\nconst getId = result => result.metacard.properties.id\n\nconst Result = props => {\n  const { attributes, selected, onClick, Thumbnail, result } = props\n  const id = getId(result)\n  return (\n    <TableRow onClick={onClick} key={id} selected={selected}>\n      {attributes.map(attribute => (\n        <TableCell key={attribute}>\n          {getCellContent(attribute.toLowerCase(), result, Thumbnail)}\n        </TableCell>\n      ))}\n    </TableRow>\n  )\n}\n\nconst DDFThumbnail = ({ result }) => {\n  const { url } =\n    result.actions.find(({ id }) => id === 'catalog.data.metacard.thumbnail') ||\n    {}\n  return <DefaultThumbnail src={url} />\n}\n\nconst computeSelected = (selection, results, start, end, e) => {\n  const clicked = getId(results[end])\n  if (e.ctrlKey || e.metaKey) {\n    return selection.has(clicked)\n      ? selection.remove(clicked)\n      : selection.add(clicked)\n  }\n  if (e.shiftKey && start !== null) {\n    const slice =\n      start < end\n        ? results.slice(start, end + 1)\n        : results.slice(end, start + 1)\n    const group = Set(slice.map(result => getId(result)))\n    return group.union(selection)\n  }\n  return selection.has(clicked) ? Set() : Set([getId(results[end])])\n}\n\nconst Results = props => {\n  const { results, attributes, onSelect, Thumbnail = DDFThumbnail } = props\n  const selection = Set(props.selection)\n  const [lastSelected, setLastSelected] = useState(null)\n  const allowTextSelect = !useKeyPressed('Shift')\n\n  return (\n    <Paper style={{ overflow: 'auto', maxHeight: '100%' }}>\n      <Table>\n        <TableHead>\n          <TableRow>\n            {attributes.map(attribute => (\n              <TableCell key={attribute}>\n                <Typography>{attribute}</Typography>\n              </TableCell>\n            ))}\n          </TableRow>\n        </TableHead>\n        <TableBody style={{ userSelect: allowTextSelect ? 'auto' : 'none' }}>\n          {results.map((result, i) => {\n            const id = getId(result)\n            return (\n              <Result\n                key={id}\n                result={result}\n                Thumbnail={Thumbnail}\n                attributes={attributes}\n                selected={selection.has(id)}\n                onClick={e => {\n                  e.stopPropagation()\n                  const selected = computeSelected(\n                    selection,\n                    results,\n                    lastSelected,\n                    i,\n                    e\n                  )\n                  onSelect(selected)\n                  setLastSelected(e.shiftKey ? lastSelected : i)\n                }}\n              />\n            )\n          })}\n        </TableBody>\n      </Table>\n    </Paper>\n  )\n}\n\nconst mapStateToProps = state => ({\n  selection: getSelected(state),\n})\n\nconst mapDispatchToProps = {\n  onSelect: setSelected,\n}\n\nexport { Results }\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Results)\n","import React, { useState } from 'react'\nimport { Results } from './results'\nimport { storiesOf } from '@connexta/ace/@storybook/react'\nimport Skeleton from '@material-ui/lab/Skeleton'\nimport { boolean } from '@connexta/ace/@storybook/addon-knobs'\nimport tn from './story-thumb'\n\nconst stories = storiesOf('Result', module)\nstories.addDecorator(Story => <Story />)\n\nconst attributes = [\n  'Title',\n  'Thumbnail',\n  'Description',\n  'Created',\n  'Modified',\n  'Checksum',\n  'ID',\n]\n\nconst Thumbnail = () => {\n  const loaded = boolean('Load Thumbnail', false)\n  return loaded ? (\n    <img style={{ maxHeight: 100 }} src={tn} />\n  ) : (\n    <Skeleton variant=\"rect\" height=\"100px\" width=\"100px\" />\n  )\n}\n\nconst LA = {\n  title: 'Los Angeles',\n  description: `Painting should do one thing. It should put happiness in your heart.\n  Give him a friend, we forget the trees get lonely too. Don't forget to tell these special people in your life just how special they are to you.\n  If I paint something, I don't want to have to explain what it is. We're not trying to teach you a thing to copy.\n  We're just here to teach you a technique, then let you loose into the world. Trees get lonely too, so we'll give him a little friend.`,\n  created: 'September 4, 1781',\n  modified: 'April 29, 1992',\n  checksum: '1',\n}\n\nlet results = []\n\nresults.push({\n  metacard: {\n    properties: {\n      ...LA,\n      id: '-1',\n    },\n  },\n})\n\nfor (let i = 0; i < 100; i++) {\n  results.push({\n    metacard: {\n      properties: {\n        ...LA,\n        id: i.toString(),\n      },\n    },\n  })\n}\n\nstories.add('Basic', () => {\n  const [selection, setSelected] = useState([])\n\n  return (\n    <div\n      style={{\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n      }}\n    >\n      <div\n        style={{\n          height: '90vh',\n          width: '90vw',\n          border: '1px dashed orange',\n        }}\n      >\n        <Results\n          results={results}\n          attributes={attributes}\n          selection={selection}\n          onSelect={setSelected}\n          Thumbnail={Thumbnail}\n        />\n      </div>\n    </div>\n  )\n})\n","import React from 'react'\n\nimport { useQuery } from '@apollo/react-hooks'\nimport gql from 'graphql-tag'\n\nimport Card from '@material-ui/core/Card'\nimport CardContent from '@material-ui/core/CardContent'\nimport Divider from '@material-ui/core/Divider'\nimport List from '@material-ui/core/List'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport Typography from '@material-ui/core/Typography'\nimport OnlineIcon from '@material-ui/icons/CloudDoneOutlined'\nimport OfflineIcon from '@material-ui/icons/OfflineBoltOutlined'\n\nconst sourcesMessage = offlineCount => {\n  if (offlineCount === 0) {\n    return 'All sources are currently up'\n  }\n\n  if (offlineCount === 1) {\n    return '1 source is currently down'\n  }\n\n  return `${offlineCount} sources are currently down`\n}\n\nexport const Sources = props => {\n  const { sources } = props\n  const offlineCount = sources.filter(source => !source.available).length\n  const getIcon = source => (source.available ? OnlineIcon : OfflineIcon)\n\n  return (\n    <div style={{ maxWidth: 600, margin: '20px auto' }}>\n      <Card>\n        <CardContent>\n          <Typography variant=\"h5\" component=\"h1\">\n            {sourcesMessage(offlineCount)}\n          </Typography>\n          <Divider style={{ marginBottom: 15, marginTop: 10 }} />\n          <List>\n            {sources.map(source => {\n              const Icon = getIcon(source)\n\n              return (\n                <ListItem key={source.id}>\n                  <ListItemIcon>\n                    <Icon key={source.available} />\n                  </ListItemIcon>\n                  <ListItemText>\n                    <Typography>{source.id}</Typography>\n                  </ListItemText>\n                </ListItem>\n              )\n            })}\n          </List>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n\nconst pollInterval = gql`\n  query SourcePollInterval {\n    systemProperties {\n      sourcePollInterval\n    }\n  }\n`\n\nconst useSourcePollInterval = init => {\n  const { data, loading, error } = useQuery(pollInterval)\n\n  if (loading || error) {\n    return init\n  }\n\n  return data.systemProperties.sourcePollInterval\n}\n\nconst sources = gql`\n  query SourcesPages {\n    sources {\n      available\n      id\n    }\n  }\n`\n\nexport default props => {\n  const pollInterval = useSourcePollInterval(60000)\n\n  const { loading, error, data = {} } = useQuery(sources, {\n    pollInterval,\n  })\n\n  return <Sources sources={loading ? [] : data.sources} />\n}\n","import React from 'react'\nimport { storiesOf } from '@connexta/ace/@storybook/react'\nimport { Sources } from './sources'\nimport { withKnobs, number, select } from '@connexta/ace/@storybook/addon-knobs'\n\nconst stories = storiesOf('Sources', module)\nstories.addDecorator(withKnobs)\n\nconst sources = [\n  {\n    sourceActions: [],\n    available: true,\n    id: 'cswFed',\n    contentTypes: [],\n    version: '2.0.2',\n  },\n  {\n    sourceActions: [],\n    available: false,\n    id: 'ddf.distribution',\n    contentTypes: [],\n    version: '',\n  },\n]\n\nconst available = availability => {\n  if (availability === 'all') {\n    return true\n  }\n  if (availability === 'none') {\n    return false\n  }\n  return Math.random() > 0.5\n}\n\nconst generateSources = (numSources = 0, availability) => {\n  const sources = []\n\n  for (let i = 0; i < numSources; i++) {\n    sources.push({\n      sourceActions: [],\n      available: available(availability),\n      id: `ddf.distribution.${i}`,\n      contentTypes: [],\n      version: '',\n    })\n  }\n\n  return sources\n}\n\nstories.add('Basic', () => {\n  const n = number('Number of Sources', 4)\n  const availability = select(\n    'Source Availability',\n    {\n      all: 'all',\n      none: 'none',\n      random: 'random',\n    },\n    'all'\n  )\n  return <Sources sources={generateSources(n, availability)} />\n})\n","import { Set } from 'immutable'\n\nconst ns = 'ddf.results.reducer'\nconst getLocalState = state => state[ns]\n\nexport const setSelected = selected => {\n  if (typeof selected === 'string') {\n    return {\n      type: `${ns}/SET_SELECTED`,\n      selected: Set([selected]),\n    }\n  } else {\n    return {\n      type: `${ns}/SET_SELECTED`,\n      selected: Set(selected),\n    }\n  }\n}\n\nconst selection = (state = Set(), action) => {\n  switch (action.type) {\n    case `${ns}/SET_SELECTED`:\n      return action.selected\n    default:\n      return state\n  }\n}\n\nexport const getSelected = state => getLocalState(state)\n\nexport default { [ns]: selection }\n","import React, { useState } from 'react'\n\nimport Skeleton from '@material-ui/lab/Skeleton'\nimport BrokenImageIcon from '@material-ui/icons/BrokenImage'\n\nconst Thumbnail = props => {\n  const { src } = props\n  const [status, setStatus] = useState('loading')\n  return (\n    <React.Fragment>\n      {status === 'loading' ? <Skeleton variant=\"rect\" height=\"100px\" /> : null}\n      <img\n        style={{\n          display: status === 'success' ? 'block' : 'none',\n          maxHeight: 100,\n          maxWidth: 150,\n        }}\n        src={src}\n        onLoad={() => setStatus('success')}\n        onError={() => setStatus('failed')}\n      />\n      {status === 'failed' ? <BrokenImageIcon fontSize=\"large\" /> : null}\n    </React.Fragment>\n  )\n}\n\nexport default Thumbnail\n","import React from 'react'\nimport Thumbnail from './thumbnail'\nimport { storiesOf } from '@connexta/ace/@storybook/react'\nimport { withKnobs, select } from '@connexta/ace/@storybook/addon-knobs'\n\nconst stories = storiesOf('Thumbnail', module)\n\nstories.addDecorator(Story => <Story />)\nstories.addDecorator(withKnobs)\n\nstories.add('Error', () => {\n  return (\n    <div\n      style={{\n        width: 'calc(100vw - 16px)',\n        height: 'calc(100vh - 16px)',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n      }}\n    >\n      <Thumbnail src={'oof'} />\n    </div>\n  )\n})\n\nstories.add('Success', () => {\n  const image = select(\n    'Image Type',\n    {\n      Square: 'https://connexta.com/images/work1.jpg',\n      Long: 'https://connexta.com/images/logo-ddf2.png',\n    },\n    'Square'\n  )\n  return (\n    <div\n      style={{\n        width: 'calc(100vw - 16px)',\n        height: 'calc(100vh - 16px)',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n      }}\n    >\n      <Thumbnail src={image} />\n    </div>\n  )\n})\n","// read default dates\n// handle switching time ranges\n// validation\n\nimport React, { useState } from 'react'\n\nimport DateFnsUtils from '@date-io/date-fns'\nimport FormControl from '@material-ui/core/FormControl'\nimport FormHelperText from '@material-ui/core/FormHelperText'\nimport InputLabel from '@material-ui/core/InputLabel'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport Select from '@material-ui/core/Select'\nimport TextField from '@material-ui/core/TextField'\nimport {\n  KeyboardDatePicker,\n  MuiPickersUtilsProvider,\n} from '@material-ui/pickers'\n\nimport { Map } from 'immutable'\n\nconst timeProperties = [\n  'created',\n  'datetime.end',\n  'datetime.start',\n  'effective',\n  'expiration',\n  'metacard.created',\n  'metacard.modified',\n  'metacard.version.versioned-on',\n  'modified',\n]\n\nconst relativeUnits = ['minutes', 'hours', 'days', 'months', 'years']\n\nconst isValidDate = date => {\n  return date !== undefined && date !== null && !isNaN(date.valueOf())\n}\n\nexport const createTimeRange = timeRange => {\n  const {\n    type = 'BEFORE',\n    value = new Date(),\n    from = new Date(),\n    to = new Date(),\n    last = 1,\n    unit = 'days',\n  } = timeRange\n\n  const cases = {\n    BEFORE: {\n      type,\n      value,\n    },\n    AFTER: {\n      type,\n      value,\n    },\n    DURING: {\n      type,\n      from,\n      to,\n    },\n    '=': {\n      type,\n      last,\n      unit,\n    },\n  }\n\n  return cases[type]\n}\n\nconst TimeRange = props => {\n  const { timeRange, errors = {} } = props\n  const [state, setState] = useState(\n    Map({\n      [timeRange.type]: timeRange,\n    })\n  )\n\n  const setTimeRange = timeRange => {\n    if (typeof props.setTimeRange === 'function') {\n      props.setTimeRange(timeRange)\n    }\n\n    setState(state.set(timeRange.type, timeRange))\n  }\n\n  const TimeRangeWhen = getTimeRangeWhen(timeRange.type)\n\n  return (\n    <div style={{ overflow: 'auto', flex: '1' }}>\n      <div style={{ display: 'flex' }}>\n        <FormControl fullWidth>\n          <InputLabel>Time Range</InputLabel>\n          <Select\n            error={errors.type !== undefined}\n            value={timeRange.type || ''}\n            onChange={e => {\n              const type = e.target.value\n              const prev = state.get(type)\n              const tr = createTimeRange({ ...prev, type })\n              setTimeRange(tr)\n            }}\n          >\n            <MenuItem value={'AFTER'}>After</MenuItem>\n            <MenuItem value={'BEFORE'}>Before</MenuItem>\n            <MenuItem value={'DURING'}>Between</MenuItem>\n            <MenuItem value={'='}>Relative</MenuItem>\n          </Select>\n          <FormHelperText error={errors.type !== undefined}>\n            {errors.type}\n          </FormHelperText>\n        </FormControl>\n      </div>\n\n      <TimeRangeWhen\n        type={timeRange.type}\n        timeRange={timeRange}\n        setTimeRange={setTimeRange}\n        errors={errors}\n      />\n    </div>\n  )\n}\n\nconst createTimeRangeComponent = label => props => {\n  const { timeRange = {}, setTimeRange, errors = {} } = props\n\n  return (\n    <DatePicker\n      label={label}\n      value={timeRange.value}\n      error={errors.value !== undefined}\n      helperText={errors.value}\n      onChange={date => {\n        setTimeRange({\n          type: timeRange.type,\n          value: date,\n        })\n      }}\n    />\n  )\n}\n\nconst TimeRangeAfter = createTimeRangeComponent(\n  'Limit search to after this time'\n)\nconst TimeRangeBefore = createTimeRangeComponent(\n  'Limit search to before this time'\n)\n\nconst TimeRangeDuring = props => {\n  const { timeRange = {}, setTimeRange, errors = {} } = props\n\n  return (\n    <div style={{ display: 'flex', alignItems: 'center' }}>\n      <DatePicker\n        label=\"From\"\n        error={errors.from !== undefined}\n        helperText={errors.from}\n        value={timeRange.from}\n        onChange={date => {\n          const value = `${date}/${timeRange.to}`\n          setTimeRange({ ...timeRange, from: date, value })\n        }}\n      />\n      <div style={{ width: 20 }} />\n      <DatePicker\n        label=\"To\"\n        error={errors.to !== undefined}\n        helperText={errors.to}\n        value={timeRange.to}\n        onChange={date => {\n          timeRange.to = date\n          const value = `${timeRange.from}/${date}`\n          setTimeRange({ ...timeRange, to: date, value })\n        }}\n      />\n    </div>\n  )\n}\n\nconst TimeRangeRelative = props => {\n  const { timeRange = {}, setTimeRange, errors = {} } = props\n\n  return (\n    <div style={{ overflow: 'auto', flex: '1', paddingTop: 10 }}>\n      <div style={{ display: 'flex' }}>\n        <div>\n          <TextField\n            label=\"Last\"\n            error={errors.last !== undefined}\n            variant=\"outlined\"\n            fullWidth\n            value={timeRange.last}\n            onChange={e => {\n              setTimeRange({\n                type: timeRange.type,\n                last: e.target.value,\n                unit: timeRange.unit,\n              })\n            }}\n          />\n          <FormHelperText error={errors.last !== undefined}>\n            {errors.last}\n          </FormHelperText>\n        </div>\n        <div style={{ width: 20 }} />\n        <FormControl fullWidth>\n          <InputLabel>Unit</InputLabel>\n          <Select\n            value={timeRange.unit}\n            error={errors.unit !== undefined}\n            onChange={e => {\n              setTimeRange({\n                type: timeRange.type,\n                last: timeRange.last,\n                unit: e.target.value,\n              })\n            }}\n          >\n            <MenuItem value={`minutes`}>Minutes</MenuItem>\n            <MenuItem value={`hours`}>Hours</MenuItem>\n            <MenuItem value={`days`}>Days</MenuItem>\n            <MenuItem value={`months`}>Months</MenuItem>\n            <MenuItem value={`years`}>Years</MenuItem>\n          </Select>\n        </FormControl>\n      </div>\n    </div>\n  )\n}\n\nconst DatePicker = props => {\n  const { value, onChange, label, error, helperText } = props\n  const [state, setState] = useState(value)\n\n  return (\n    <MuiPickersUtilsProvider utils={DateFnsUtils}>\n      <KeyboardDatePicker\n        error={error}\n        helperText={helperText}\n        fullWidth\n        disableToolbar\n        variant=\"inline\"\n        format=\"MM/dd/yyyy\"\n        margin=\"normal\"\n        id=\"date-picker-inline\"\n        label={label}\n        value={state}\n        onChange={(date, value) => {\n          setState(value)\n          onChange(date)\n        }}\n        KeyboardButtonProps={{\n          'aria-label': 'change date',\n        }}\n      />\n    </MuiPickersUtilsProvider>\n  )\n}\n\nconst Empty = () => null\n\nconst ranges = {\n  AFTER: TimeRangeAfter,\n  BEFORE: TimeRangeBefore,\n  DURING: TimeRangeDuring,\n  '=': TimeRangeRelative,\n}\n\nconst getTimeRangeWhen = type => {\n  return ranges[type] || Empty\n}\n\nexport const validate = (timeRange = {}) => {\n  const errors = {}\n\n  const { type, value } = timeRange\n\n  switch (type) {\n    case undefined:\n      errors.type = 'Type must supplied'\n      break\n\n    case 'DURING':\n      const { to, from } = timeRange\n      if (!isValidDate(to)) {\n        errors.to = `'To' date must be a valid date`\n      }\n\n      if (!isValidDate(from)) {\n        errors.from = `'From' date must be a valid date`\n      }\n\n      if (from && to) {\n        if (from >= to) {\n          errors.to = `'To' date must be after 'From' date`\n          errors.from = `'From' date must be befor 'To' date`\n        }\n      }\n      break\n\n    case '=':\n      const { last, unit } = timeRange\n      if (isNaN(last) || last < 1) {\n        errors.last = 'Value must be > 0'\n      }\n\n      if (!relativeUnits.includes(unit)) {\n        errors.unit = 'Must include a valid unit'\n      }\n      break\n\n    default:\n      if (!isValidDate(value)) {\n        errors.value = `A valid date must be selected`\n      }\n  }\n\n  return errors\n}\n\nexport default TimeRange\nexport { TimeRangeAfter, TimeRangeBefore, TimeRangeDuring, TimeRangeRelative }\n","import React from 'react'\nimport { storiesOf } from '@connexta/ace/@storybook/react'\n//import { text, select } from '@connexta/ace/@storybook/addon-knobs'\nimport { action } from '@connexta/ace/@storybook/addon-actions'\nimport TimeRange from './time-range'\nimport { validate } from './time-range'\n\nconst stories = storiesOf('TimeRange', module)\n\nstories.addDecorator(Story => <Story />)\n\nstories.add('basic', () => {\n  const [timeRange, setTimeRange] = React.useState({})\n  return (\n    <TimeRange\n      timeRange={timeRange}\n      setTimeRange={timeRange => {\n        setTimeRange(timeRange)\n        action('setTimeRange')(timeRange)\n      }}\n    />\n  )\n})\n\nstories.add('validation', () => {\n  const [timeRange, setTimeRange] = React.useState({})\n  return (\n    <TimeRange\n      timeRange={timeRange}\n      setTimeRange={timeRange => {\n        setTimeRange(timeRange)\n        action('setTimeRange')(timeRange)\n      }}\n      errors={validate(timeRange)}\n    />\n  )\n})\n","import React from 'react'\nimport Select from '@material-ui/core/Select'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport Checkbox from '@material-ui/core/Checkbox'\nimport FormControl from '@material-ui/core/FormControl'\nimport InputLabel from '@material-ui/core/InputLabel'\n\nconst units = [\n  'meters',\n  'kilometers',\n  'feet',\n  'yards',\n  'miles',\n  'nautical miles',\n]\n\nconst Units = props => {\n  const { value, onChange } = props\n\n  return (\n    <FormControl>\n      <InputLabel>Units</InputLabel>\n      <Select\n        value={value ? value : 'meters'}\n        onChange={e => {\n          onChange(e)\n        }}\n        renderValue={selected => selected}\n        style={{ minWidth: 100 }}\n      >\n        {units.map(unit => (\n          <MenuItem key={unit} value={unit}>\n            <Checkbox checked={unit === value} />\n            <ListItemText primary={unit} />\n          </MenuItem>\n        ))}\n      </Select>\n    </FormControl>\n  )\n}\n\nexport default Units\n"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACnRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7BA;AACA;;;AACA;AACA;AAAA;AACA;;;AACA;AACA;;;AAAA;AACA;;;AACA;AACA;;;AAAA;AACA;;;AAAA;AACA;;;AAAA;AACA;;;AAAA;AACA;;;;;;;;;;;;;;;;;;;;AACA;AAAA;AAAA;AACA;AACA;AAFA;AACA;AAYA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAHA;AACA;AAeA;AAAA;AAAA;AACA;AACA;AAFA;AACA;AAcA;AAEA;AAFA;AACA;AAOA;AACA;AAAA;AACA;AAAA;AACA;AAEA;AAAA;AACA;AAEA;AAAA;AARA;AACA;AAUA;AAEA;AAFA;AACA;AASA;AACA;AAWA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;;;;AAJA;;;;;;;;;;;;;AAtFA;AAaA;AAgBA;AAeA;AAQA;AAWA;AAUA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvFA;AACA;;;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AACA;AAOA;AATA;AACA;AAWA;AACA;AADA;AACA;AAGA;AACA;AACA;AAFA;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A;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;;AAfA;AACA;AAkBA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;;AAfA;AACA;AAkBA;AAAA;;;;;;;;;;AAtDA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAKA;AAEA;AAmBA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnCA;;;;;;;;;;;;;;AAcA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAoBA;AACA;AArBA;AAuBA;AAGA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AACA;AAEA;AACA;AAAA;AAEA;AACA;AACA;AARA;;AAWA;AACA;AAAA;AAEA;AA/CA;AACA;AANA;AAKA;AAkDA;AACA;AAQA;AASA;AACA;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArDA;AAuDA;AAAA;AAAA;AA9GA;AA8GA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAnHA;AAmHA;AACA;AACA;AAsBA;AACA;AAAA;AA5IA;AA4IA;AAIA;AACA;AACA;AACA;AACA;AADA;AAGA;AAEA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AAAA;AAAA;AAAA;AAMA;AAEA;AACA;AADA;AACA;AACA;AACA;AAGA;AACA;AADA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAPA;AACA;AASA;;;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAMA;AACA;AAEA;AAAA;AAAA;AAHA;AAAA;AACA;AAKA;AACA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AAEA;AAAA;AAAA;AAHA;AAAA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAGA;AAGA;AACA;AADA;AAEA;AAAA;AACA;AACA;AACA;AAEA;AAAA;AACA;AAEA;AAAA;AAEA;AAAA;AAEA;AAGA;AAEA;AAPA;AACA;AASA;AACA;AAAA;AAIA;AAGA;AAEA;AACA;AAAA;AACA;AACA;AAEA;AACA;AAAA;;AAIA;AACA;AADA;AACA;AAGA;AACA;AADA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AAFA;AAIA;AACA;;AAEA;AACA;AAFA;AAIA;AACA;AAAA;AADA;AAGA;AACA;AACA;;AACA;AAAA;AAAA;AAIA;AAJA;AAMA;AACA;AACA;AACA;;AACA;AAEA;AACA;AAHA;AAKA;AACA;AACA;;AACA;AAEA;AACA;AACA;AAJA;AAMA;AACA;AACA;;AACA;AAAA;AAGA;AAHA;AAKA;AACA;;AACA;AAEA;AAFA;AAIA;AACA;AACA;AACA;AADA;AAGA;AAEA;AAAA;AACA;AACA;AACA;AAEA;AAJA;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AADA;AAGA;AAHA;AAKA;AACA;AACA;;AAEA;AADA;AAAA;AAAA;AAKA;AACA;AACA;;AAEA;AADA;AAAA;AAAA;AAKA;AACA;AACA;;AAEA;AADA;AAAA;AAAA;AAKA;AACA;AACA;AACA;;AAEA;AADA;AAAA;AAIA;AAJA;;AAQA;AAAA;;AAEA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA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;AADA;;AA4CA;AA5CA;AA4CA;AACA;AA7CA;AAAA;AAAA;;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AALA;AAwDA;AACA;AAzDA;AAAA;AAAA;;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AA0DA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AAEA;AAJA;;AADA;AACA;AAQA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AANA;;AADA;AACA;AAUA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAGA;AACA;AADA;AAAA;AAAA;AACA;AACA;AACA;AADA;AAKA;AACA;AADA;AAZA;AAAA;AACA;AAcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAVA;;AADA;AACA;AAcA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AADA;AAGA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AACA;AAEA;AAAA;AACA;AAAA;AAEA;AAAA;AAFA;AAEA;AAHA;AAQA;AACA;AADA;AACA;AACA;AAEA;AAxBA;;AADA;AACA;AA4BA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAOA;AACA;AACA;AAGA;AACA;AADA;AAdA;AACA;AAgBA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AADA;AAOA;AAVA;;AADA;AACA;AAcA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AAEA;AAJA;;AADA;AACA;AAQA;AAAA;AACA;AACA;AAFA;AAAA;AACA;AAIA;AAAA;AACA;AAEA;AAFA;AACA;AAGA;AALA;AAAA;AACA;AAOA;AACA;AADA;AACA;AAGA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AALA;AAAA;AACA;AASA;AACA;AADA;AACA;AAGA;AAAA;AACA;AACA;AACA;AAEA;AALA;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","sourceRoot":""}